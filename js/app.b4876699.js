(function(t){function a(a){for(var s,n,r=a[0],c=a[1],l=a[2],u=0,m=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(a);while(m.length)m.shift()();return o.push.apply(o,l||[]),e()}function e(){for(var t,a=0;a<o.length;a++){for(var e=o[a],s=!0,r=1;r<e.length;r++){var c=e[r];0!==i[c]&&(s=!1)}s&&(o.splice(a--,1),t=n(n.s=e[0]))}return t}var s={},i={app:0},o=[];function n(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=s,n.d=function(t,a,e){n.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,a){if(1&a&&(t=n(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)n.d(e,s,function(a){return t[a]}.bind(null,s));return e},n.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(a,"a",a),a},n.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=a,r=r.slice();for(var l=0;l<r.length;l++)a(r[l]);var d=c;o.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"034f":function(t,a,e){"use strict";var s=e("85ec"),i=e.n(s);i.a},"0910":function(t,a,e){"use strict";var s=e("b20b"),i=e.n(s);i.a},1:function(t,a){},1886:function(t,a,e){},"1af4":function(t,a,e){"use strict";var s=e("9d14"),i=e.n(s);i.a},"2a7d":function(t,a,e){"use strict";var s=e("fe52"),i=e.n(s);i.a},"2e2c":function(t,a,e){},"35cc":function(t,a,e){"use strict";var s=e("e575"),i=e.n(s);i.a},"3a78":function(t,a,e){t.exports=e.p+"img/imgp1.8b48d87b.png"},4678:function(t,a,e){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var a=o(t);return e(a)}function o(t){if(!e.o(s,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=o,t.exports=i,i.id="4678"},5010:function(t,a,e){},5012:function(t,a,e){},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var s=e("2b0e"),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("main",[this.fueraJuego?e("nav1",{attrs:{conexion:this.socket,notificaciones:this.notificaciones,nick:this.user.nick,img:this.user.img,logged:this.logged},on:{logueado:this.logueado,delNotificacion:this.removeNotification,logout:this.logout}}):t._e(),this.logged?e("section",[e("keep-alive",{attrs:{include:"pagina-principal"}},[e("router-view",{attrs:{conexion:this.socket,user:this.user},on:{notificacion:this.addNotificacion}})],1)],1):e("section",[e("pagina-login")],1)],1)},o=[],n=(e("b64b"),function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",[s("main",{staticClass:"container-fluid"},[s("h1",{staticClass:"mt-1 mb-1 text-center",attrs:{id:"tituloChat"}},[t._v("Chat General")]),s("section",{staticClass:"d-flex row m-1",attrs:{id:"chat"}},[t._m(0),s("div",{staticClass:"col-12 col-md-5 p-0 overflow-auto"},[s("md-list",{attrs:{id:"usuarios"}},[s("md-list-item",[s("input",{attrs:{id:"checkboxLocal",type:"checkbox"},on:{click:t.cambiarEstado}}),s("label",{staticClass:"check mb-0 mr-2",attrs:{for:"checkboxLocal"}}),s("md-avatar",{staticClass:"md-large"},[s("img",{attrs:{src:t.userImage,alt:t.user.nick}})]),s("div",{staticClass:"d-flex w-75 align-items-center justify-content-center"},[s("p",{staticClass:"text-center nombreUserLista m-0"},[t._v(t._s(t.user.nick))]),s("md-icon",{staticClass:"ml-1",attrs:{title:this.badge_label}},[t._v(t._s(t.badge))])],1),s("md-button",{staticClass:"ml-2 md-icon-button md-list-action",on:{click:function(a){return t.$router.push({path:"/perfil/"+t.user.nick})}}},[s("md-icon",[t._v("account_circle")])],1)],1),s("md-divider",{staticClass:"md-inset"}),s("md-list-item",[s("md-avatar",{staticClass:"md-large"},[s("img",{attrs:{src:e("5f7e"),alt:"General"}})]),s("div",{staticClass:"md-list-item-text"},[s("p",{staticClass:"text-center nombreUserLista"},[t._v("Chat General")])]),s("md-button",{staticClass:"md-icon-button md-list-action mr-0",on:{click:function(a){return t.cambiarRoom("general")}}},[s("md-icon",[t._v("chat")])],1),t.montado?s("div",[t.notificacion["general"]?s("div",{staticClass:"bounce"},[s("md-badge",{staticClass:"md-primary",attrs:{"md-content":t.notificacion["general"],dense:""}})],1):t._e()]):t._e()],1),s("md-divider",{staticClass:"md-inset"}),t._l(this.usuarios,(function(a){return s("userChat",{key:a.id,attrs:{nick:a.nick,img:a.img,ready:a.ready,tipo_usuario:a.tipo_usuario,mensajes:t.notificacion[a.nick]},on:{cambiarSala:t.cambiarRoom,invitar:t.prepInvitar}})}))],2)],1)]),s("h2",{staticClass:"text-center mt-2 mb-2"},[t._v("Proximos torneos")]),s("section",{staticClass:"contenedorCarousel"},[s("div",{staticClass:"carouselTorneos"},t._l(t.torneos,(function(a){return s("div",{staticClass:"torneoC",style:{background:"url("+t.tournamentURLimg+a.img+")"},attrs:{id:"torneo1"}},[s("md-button",{staticClass:"md-raised",on:{click:function(e){return t.$router.push({path:"torneos/"+a._id})}}},[t._v("Ver detalles")]),s("h3",{staticClass:"text-center mt-4 text-white"},[t._v(" "+t._s(a.nombre)+" ")])],1)})),0)]),s("div",{staticClass:"modal fade modal-invitar",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg"},[s("div",{staticClass:"modal-content p-2"},[s("div",{staticClass:"modal-header mb-2"},[s("h1",{staticClass:"modal-title"},[t._v(t._s(t.jugadorInvitar))]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])]),s("div",{staticClass:"modal-body"},[s("h3",{staticClass:"text-center"},[t._v(t._s(t.textoInvitar))]),s("div",{staticClass:"d-flex align-items-center justify-content-center"},[s("button",{staticClass:"btn btn-primary",attrs:{id:"botonInvitar"},on:{click:function(a){return t.invitar()}}},[t._v("Invitar")]),s("button",{staticClass:"btn btn-success",staticStyle:{display:"none"},attrs:{id:"botonJugar"},on:{click:function(a){return t.jugar()}}},[t._v("Jugar")])])])])])]),s("div",{staticClass:"modal fade modal-invitado",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg"},[s("div",{staticClass:"modal-content p-2"},[s("div",{staticClass:"modal-header mb-2"},[s("h1",{staticClass:"modal-title"},[t._v(t._s(t.jugadorInvitar))]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])]),s("div",{staticClass:"modal-body"},[s("h3",{staticClass:"text-center"},[t._v(t._s(t.textoInvitado))]),s("div",{staticClass:"d-flex align-items-center justify-content-center"},[s("button",{staticClass:"btn btn-success",on:{click:function(a){return t.aceptarInvitacion()}}},[t._v("Aceptar")]),s("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.rechazarInvitacion()}}},[t._v("Rechazar")])])])])])])])])}),r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-12 col-md-7 mb-2 mb-md-0 p-0",attrs:{id:"mensajes"}},[e("div",{staticClass:"overflow-auto",attrs:{id:"mensajesChat"}},[e("ul",{attrs:{id:"listaMensajes"}},[e("li",[t._v("Bienvenido al chat general")])])]),e("div",{staticClass:"row m-0 botAnim",attrs:{id:"controlesChat"}},[e("input",{staticClass:"col-10",attrs:{type:"text",id:"textInput"}}),e("button",{staticClass:"col-2 center m-0 p-0",attrs:{id:"enviar"}},[t._v("Enviar")])])])}],c=(e("4160"),e("caad"),e("2532"),e("159b"),e("1157")),l=e.n(c),d=e("8055"),u=e.n(d),m=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("md-list-item",{staticClass:"userLista"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.listo,expression:"listo"}],staticClass:"m-1 checkboxUser",attrs:{type:"checkbox",disabled:"disabled",id:t.nick},domProps:{checked:Array.isArray(t.listo)?t._i(t.listo,null)>-1:t.listo},on:{change:function(a){var e=t.listo,s=a.target,i=!!s.checked;if(Array.isArray(e)){var o=null,n=t._i(e,o);s.checked?n<0&&(t.listo=e.concat([o])):n>-1&&(t.listo=e.slice(0,n).concat(e.slice(n+1)))}else t.listo=i}}}),e("label",{staticClass:"check mb-0 mr-2",attrs:{for:t.nick}}),e("md-avatar",{staticClass:"md-large"},[e("img",{attrs:{src:t.userImage,alt:t.nick}})]),e("div",{staticClass:"w-100 row m-0 p-0"},[e("div",{staticClass:"d-flex align-items-center justify-content-center col-12 col-lg-7"},[e("p",{staticClass:"text-center nombreUserLista m-0",attrs:{title:t.nick}},[t._v(t._s(t.nick))]),e("md-icon",{staticClass:"ml-1",attrs:{title:this.badge_label}},[t._v(t._s(t.badge))])],1),e("div",{staticClass:"botonesUser col-12 col-lg-5 d-flex justify-content-lg-end justify-content-between"},[e("md-button",{staticClass:"md-icon-button mr-0",on:{click:this.cambiarRoom}},[e("md-icon",[t._v("chat")])],1),0!=t.mensajesNuevos?e("div",{staticClass:"bounce"},[e("md-badge",{staticClass:"md-primary",attrs:{"md-content":t.mensajesNuevos,dense:""}})],1):t._e(),e("md-button",{staticClass:"ml-2 md-icon-button md-list-action",attrs:{disabled:t.disabled},on:{click:this.invitarJugador}},[e("md-icon",[t._v("videogame_asset")])],1),e("md-button",{staticClass:"ml-2 md-icon-button md-list-action",on:{click:function(a){return t.$router.push({path:"/perfil/"+t.nick})}}},[e("md-icon",[t._v("account_circle")])],1)],1)])],1)},f=[],p={name:"user-chat",props:["nick","ready","img","mensajes","tipo_usuario"],mounted:function(){switch(this.user.tipo_usuario){case 0:this.badge=null;break;case 1:this.badge="camera_alt",this.badge_label="Camara verificada";break;case 2:this.badge="grade",this.badge_label="Usuario Vip";break;case 3:this.badge="verified_user",this.badge_label="Usuario verificador";break;case 4:this.badge="visibility",this.badge_label="Usuario moderador";break;case 5:this.badge="build",this.badge_label="Usuario administrador";break;default:this.badge=null;break}},updated:function(){console.log("hace update")},data:function(){return{nombre:this.nick,badge:null,badge_label:""}},methods:{cambiarRoom:function(){console.log("llega a cambiar sala del componente"),this.$emit("cambiarSala",this.nombre)},invitarJugador:function(){console.log("llega a boton de componente"),this.$emit("invitar",this.nombre)}},computed:{userImage:function(){return"./img/usuarios/"+this.img},mensajesNuevos:function(){return this.mensajes},listo:function(){return this.ready},disabled:function(){return!this.ready}}},h=p,v=(e("d706"),e("2877")),b=Object(v["a"])(h,m,f,!1,null,"7fa6d99f",null),g=b.exports,C=l.a,_={name:"pagina-principal",props:["conexion","user"],components:{userChat:g},beforeMount:function(){var t=this;this.socket.on("resultTorneosCarousel",(function(a){t.torneos=a})),this.socket.emit("getTorneosCarousel")},mounted:function(){var t=this;switch(console.log("se monta"),this.user.tipo_usuario){case 0:this.badge=null;break;case 1:this.badge="camera_alt",this.badge_label="Camara verificada";break;case 2:this.badge="grade",this.badge_label="Usuario Vip";break;case 3:this.badge="verified_user",this.badge_label="Usuario verificador";break;case 4:this.badge="visibility",this.badge_label="Usuario moderador";break;case 5:this.badge="build",this.badge_label="Usuario administrador";break;default:this.badge=null;break}this.usr=this.user.nick,this.socket.emit("userConected",this.user),this.socket.on("user",(function(t){console.log(t)})),this.socket.on("reenvio",(function(a){var e=!1;console.log("llegan los mensajes"+a),console.log(a.userDest+"------"+t.roomActual),(a.dest==t.roomActual&&a.usr!=t.usr||a.usr==t.roomActual&&a.userDest==t.usr&&"general"!=a.dest)&&(t.mostrarMensaje(a,!1),e=!0),a.usr!=t.usr&&("general"!=a.dest?(t.chat[a.usr]||(t.chat[a.usr]=[]),t.chat[a.usr].push(a),e||t.notificacion[a.usr]++):(t.chat["general"]||(t.chat["general"]=[]),t.chat["general"].push(a),e||t.notificacion["general"]++)),console.log(e),console.log(t.notificacion),"/"!=t.$route.path&&(console.log("emite evento"),t.$emit("notificacion",{men:{icon:"chat",text:"Tienes mensajes nuevos",ruta:"/"}})),t.$forceUpdate()})),this.socket.on("listaUsuarios",(function(a){t.usuarios||(delete a[t.user.nick],t.usuarios=a,Object.keys(a).forEach((function(a){t.notificacion[a]=0})),t.notificacion["general"]=0),Object.keys(a).forEach((function(e){Object.keys(t.usuarios).includes(e)||e!=t.usr&&(t.usuarios[e]=a[e],t.notificacion[e]=0)})),t.$forceUpdate(),console.log(t.usuarios)})),this.socket.on("usuarioDesc",(function(a){a.forEach((function(a){delete t.usuarios[a]})),t.$forceUpdate()})),this.socket.on("menPriv",(function(t){console.log(t)})),this.socket.on("cambEstado",(function(a){if(a!=t.user.nick&&t.usuarios[a]){console.log("recibe cambiar");var e=!t.usuarios[a].ready;delete t.usuarios[a].ready,t.$set(t.usuarios[a],"ready",e),console.log(t.usuarios)}t.$forceUpdate()})),this.socket.on("invitacion",(function(a){t.invitado(a)})),this.socket.on("invitacionAceptada",(function(a){t.invitacionAceptada(a)})),C("#enviar").click((function(){t.enviarMensaje(t.socket)})),C("#textInput").keypress((function(a){"13"==a.keyCode&&t.enviarMensaje(t.socket)})),this.montado=!0,setTimeout((function(){t.iniciarCarousel()}),1e3)},beforeDestroy:function(){this.conexion.off("userConected"),this.conexion.off("reenvio"),this.conexion.off("listaUsuarios"),this.conexion.off("usuarioDesc"),this.conexion.off("menPriv"),this.conexion.off("cambEstado"),this.conexion.off("invitacion"),this.conexion.off("invitacionAceptada")},data:function(){return{chat:Object(),usr:"",ready:!1,roomActual:"general",usuarios:null,socket:this.conexion,jugadorInvitar:null,textoInvitar:null,textoInvitado:null,notificacion:Object(),montado:!1,badge:null,badge_label:"",torneos:[]}},updated:function(){console.log(this.conexion)},methods:{iniciarCarousel:function(){C(".carouselTorneos").slick({dots:!0,infinite:!1,speed:300,slidesToShow:3,slidesToScroll:3,adaptiveHeight:!0,responsive:[{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})},mostrarMensaje:function(t,a){var e=C("<li>"),s=C("<p>");C(s).text(t.usr+": "+t.msg),C(s).addClass("m-0 p-2"),C(e).append(s),a?C(e).addClass("mensaje-derecha"):C(e).addClass("mensaje-izquierda"),C("#listaMensajes").append(e)},cambiarEstado:function(){console.log("hace cambiar estado"),this.conexion.emit("checked",this.user.nick)},enviarMensaje:function(t){if(""!=C("#textInput").val()){var a=C("#textInput").val();C("#textInput").val("");var e="";e="general"==this.roomActual?"general":this.usuarios[this.roomActual].id;var s={usr:this.usr,id:this.socket.id,msg:a,dest:e,userDest:this.roomActual};t.emit("mensaje",s),this.chat[s.userDest]||(this.chat[s.userDest]=[]),this.chat[s.userDest].push(s),this.mostrarMensaje(s,!0)}},cambiarRoom:function(t){var a=this;console.log(t),this.notificacion[t]=0,"general"==t?C("#tituloChat").text("Chat General"):C("#tituloChat").text(t),C("#listaMensajes").empty(),this.roomActual=t,this.chat[t]&&this.chat[t].forEach((function(t){t.usr==a.usr?a.mostrarMensaje(t,!0):a.mostrarMensaje(t,!1)})),this.$forceUpdate()},prepInvitar:function(t){console.log("llega a metodo prep"),this.jugadorInvitar=t,this.textoInvitar="¿Quieres invitar a "+t+"?",C("#botonJugar").hide(),C("#botonInvitar").show(),C(".modal-invitar").modal("show")},invitar:function(){console.log(this.jugadorInvitar),console.log(this.usr),this.socket.emit("invitar",this.jugadorInvitar,this.usr),this.textoInvitar="Invitado, esperando respuesta",C("#botonInvitar").hide()},invitado:function(t){this.jugadorInvitar=t,this.textoInvitado=t+" quiere jugar contigo",C(".modal-invitado").modal("show")},aceptarInvitacion:function(){this.socket.emit("aceptarInvitacion",this.jugadorInvitar,this.usr),C(".modal-invitado").modal("hide"),console.log(this.jugadorInvitar);var t=this.$router.resolve({path:"/",query:{contrincante:this.jugadorInvitar,id:this.usr}});window.open(t.href,"_blank")},rechazarInvitacion:function(){this.socket.emit("rechazarInvitacion",this.jugadorInvitar,this.usr),C(".modal-invitado").modal("hide")},invitacionAceptada:function(t){C(".modal-invitar").modal("show"),this.jugadorInvitar=t,this.textoInvitar=t+" ha aceptado la partida!",C("#botonJugar").show()},jugar:function(){C(".modal-invitar").modal("hide"),console.log(this.jugadorInvitar);var t=this.$router.resolve({path:"/",query:{contrincante:this.jugadorInvitar,id:this.usr}});window.open(t.href,"_blank")}},computed:{userImage:function(){return"./img/usuarios/"+this.user.img},tournamentURLimg:function(){return"./img/torneos/"}}},y=_,j=(e("b7d1"),Object(v["a"])(y,n,r,!1,null,"6a6ab74f",null)),k=j.exports,x=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"pagina-login"},[t._m(0),e("md-divider"),t._m(1),e("md-divider"),t._m(2),e("md-divider"),t._m(3)],1)},w=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("article",{staticClass:"m-5"},[e("h1",{staticClass:"text-center"},[e("b",{staticClass:"text-danger"},[t._v("DEC")]),t._v("Live")]),e("p",{staticClass:"text-center"},[t._v("Bienvenidos a DECLive, la web de competicion de dardos online donde podras jugar y competir con jugadores de todo el mundo y progresar como jugador profesional")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("article",{staticClass:"row m-5"},[s("img",{staticClass:"col-12 col-sm-6",attrs:{src:e("9b8d")}}),s("div",{staticClass:"col-12 col-sm-6"},[s("h2",{staticClass:"text-center"},[t._v("Haz nuevos amigos... y rivales")]),s("p",{staticClass:"text-center"},[t._v("Interactua con los jugadores a traves del chat principal e invitalos a jugar de una forma facil e intuitiva. Solo se puede invitar a los jugadores que esten preparados y hayan puesto su boton en verde asi no te molestaran cuando no quieras jugar. ")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("article",{staticClass:"row m-5"},[s("img",{staticClass:"col-12 col-sm-6 order-sm-2",attrs:{src:e("3a78")}}),s("div",{staticClass:"col-12 col-sm-6 order-sm-1"},[s("h2",{staticClass:"text-center"},[t._v("Participa en torneos")]),s("p",{staticClass:"text-center"},[t._v("Juega torneos de la comunidad y torneos oficiales donde podras demostrar tu nivel. "),s("i",[t._v("Para poder jugar torneos tendras que tener la cuenta verificada por un administrador. ")])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("article",{staticClass:"row m-5"},[s("img",{staticClass:"col-12 col-sm-6",attrs:{src:e("b436")}}),s("div",{staticClass:"col-12 col-sm-6"},[s("h2",{staticClass:"text-center"},[t._v("Controla tus estadisticas")]),s("p",{staticClass:"text-center"},[t._v("Vuelve a revisar las estadisticas de tus partidas anteriores para analizar tu evolución como jugador. ")])])])}],T={name:"pagina-login",props:[],mounted:function(){},data:function(){return{}},methods:{},computed:{}},I=T,P=(e("e784"),Object(v["a"])(I,x,w,!1,null,"783cf644",null)),S=P.exports,D=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("main",[e("nav",{staticClass:"navbar navbar-expand-md navbar-dark"},[t._m(0),t._m(1),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"collapsibleNavId"}},[e("ul",{staticClass:"navbar-nav mr-auto mt-2 mt-lg-0"},[e("li",{staticClass:"nav-item active"},[e("md-button",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Inicio "),e("span",{staticClass:"sr-only"},[t._v("(current)")])])],1),e("li",{staticClass:"nav-item active"},[e("md-button",{staticClass:"nav-link",attrs:{to:"/torneos"}},[t._v("Torneos")])],1)]),e("div",[e("div",{attrs:{id:"iconoNotificaciones"},on:{click:this.verNotificaciones}},[this.logged?e("md-icon",{staticClass:"m-0 w-100 mr-4",attrs:{id:"campanaNotificaciones"}},[t._v(t._s(t.campana))]):t._e()],1),e("div",{staticClass:"notificaciones overflow-auto"},[e("md-list",{staticClass:"listaNotificaciones"},[t._l(this.alertas,(function(a,s){return e("md-list-item",{key:s,staticClass:"w-100",on:{click:function(e){return t.eventoItemLista({not:s,ruta:a.ruta})}}},[e("md-icon",{staticClass:"mr-3"},[t._v(t._s(a.icon))]),e("p",{staticClass:"textoNotificaciones m-0 w-100"},[t._v(t._s(a.text))])],1)})),e("md-divider")],2)],1)]),this.logged?e("section",{staticClass:"sombraInsetComp",attrs:{id:"navuser"}},[e("div",{staticClass:"d-flex align-items-center m-2"},[e("img",{staticClass:"ml-2 mr-1 imgUser",attrs:{src:t.userImage}}),e("div",{staticClass:"d-flex flex-column justify-content-between"},[e("p",{staticClass:"m-0 texto-claro text-center",attrs:{id:"usernameNav"}},[t._v(t._s(this.nick))]),e("div",{attrs:{id:"botones"}},[e("md-button",{staticClass:"b-0 md-raised",on:{click:function(a){return t.$router.push({path:"/perfil/"+t.nick})}}},[t._v("Perfil")]),e("md-button",{staticClass:"b-0 md-raised",on:{click:this.logout}},[t._v("Logout")])],1)])])]):e("section",{staticClass:"d-flex"},[e("md-button",{staticClass:"md-raised b-0",attrs:{"data-toggle":"modal","data-target":".modal-login",id:"abrirLogin"}},[t._v("Login")]),e("md-button",{staticClass:"md-raised b-0",attrs:{"data-toggle":"modal","data-target":".modal-registro",id:"abrirRegistro"}},[t._v("Registrarse")])],1)])]),e("div",{staticClass:"modal fade modal-login",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content p-2"},[t._m(2),e("div",{staticClass:"modal-body"},[e("form",{attrs:{action:"",method:"post"},on:{submit:function(a){return a.preventDefault(),t.loguearse()}}},[t._m(3),t._m(4),t._m(5),e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Enviar")]),e("p",{staticClass:"text-danger",attrs:{id:"errorLogin"}},[t._v(t._s(t.errorLogin))])])])])])])]),e("div",{staticClass:"modal fade modal-registro",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content"},[t._m(6),e("div",{staticClass:"modal-body"},[e("form",{attrs:{action:"",method:"post"},on:{submit:function(a){return a.preventDefault(),t.registrarse()}}},[t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Enviar")]),e("p",{staticClass:"text-danger",attrs:{id:"registerStatus"}},[t._v(t._s(t.registerStatus))])])])])])])])},E=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[s("img",{staticClass:"logo",attrs:{src:e("cf05")}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"navbar-toggler d-lg-none",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapsibleNavId","aria-controls":"collapsibleNavId","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header mb-2"},[e("h1",{staticClass:"modal-title"},[t._v("Login")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"emailL"}},[t._v("Email")]),e("input",{staticClass:"form-control",attrs:{type:"email",id:"emailL","aria-describedby":"emailHelp",name:"email",placeholder:"Introduce tu email",required:""}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("No compartiremos tu Email con nadie.")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"passwL"}},[t._v("Contraseña")]),e("input",{staticClass:"form-control",attrs:{type:"password",id:"passwL",name:"passw",placeholder:"Contraseña",required:""}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-check"},[e("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"terminosL",required:""}}),e("label",{staticClass:"form-check-label",attrs:{for:"terminosL"}},[t._v("Terminos y condiciones")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header mb-2"},[e("h1",{staticClass:"modal-title"},[t._v("Registro")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"nick"}},[t._v("Nick")]),e("input",{staticClass:"form-control",attrs:{type:"text",id:"nick",name:"text",placeholder:"Introduce tu Nick",required:""}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"nombre"}},[t._v("Nombre")]),e("input",{staticClass:"form-control",attrs:{type:"text",id:"nombre",name:"text",placeholder:"Introduce tu nombre",required:""}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"email"}},[t._v("Email")]),e("input",{staticClass:"form-control",attrs:{type:"email",id:"email","aria-describedby":"emailHelp",name:"email",placeholder:"Introduce tu email",required:""}}),e("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("No compartiremos tu Email con nadie.")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"passw"}},[t._v("Contraseña")]),e("input",{staticClass:"form-control",attrs:{type:"password",id:"passw",name:"passw",placeholder:"Contraseña",required:""}})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-check"},[e("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"terminos",required:""}}),e("label",{staticClass:"form-check-label",attrs:{for:"terminos"}},[t._v("Terminos y condiciones")])])}],M=(e("4de4"),{name:"nav1",props:["conexion","nick","logged","img","notificaciones"],mounted:function(){var t=this;this.conexion.on("errorLogin",(function(a){t.errorLogin=a,setTimeout((function(){t.errorLogin=""}),2e3)})),this.conexion.on("resultadoRegistro",(function(a){if(a.error)t.registerStatus=a.error,console.log(t.registerStatus),console.log(a.error);else{t.registerStatus=a.registrado;$("#nick")[0].value="",$("#nombre")[0].value="",$("#email")[0].value="",$("#passw")[0].value="";setTimeout((function(){$(".modal-registro").modal("hide"),t.registerStatus=" "}),2e3)}}))},beforeDestroy:function(){this.conexion.off("errorLogin"),this.conexion.off("resultadoRegistro")},updated:function(){console.log(this.alertas),this.notificaciones.nada||this.notificaciones.visto||($("#campanaNotificaciones").addClass("campana"),this.campana="notifications_active")},data:function(){return{registerStatus:"",errorLogin:"",userImg:this.img,campana:"notifications"}},methods:{loguearse:function(){var t=$("#emailL")[0].value,a=$("#passwL")[0].value;this.conexion.emit("login",{email:t,password:a})},eventoItemLista:function(t){this.$emit("delNotificacion",t.not),this.$router.push({path:t.ruta})},verNotificaciones:function(){this.notificaciones.visto=!0,$("#campanaNotificaciones").removeClass("campana"),this.campana="notifications",console.log("intenta mostrar notificaciones"),$(".notificaciones").is(":visible")?$(".notificaciones").hide():$(".notificaciones").show()},registrarse:function(){var t=$("#nick")[0].value,a=$("#nombre")[0].value,e=$("#email")[0].value,s=$("#passw")[0].value;this.conexion.emit("register",{nick:t,nombre:a,email:e,password:s})},logout:function(){this.$emit("logout")}},computed:{userImage:function(){return"./img/usuarios/"+this.img},alertas:function(){var t=this,a={};return Object.keys(this.notificaciones).filter((function(e){"visto"!=e&&(a[e]=t.notificaciones[e])})),a}}}),L=M,N=(e("a8cb"),Object(v["a"])(L,D,E,!1,null,"11fad4d9",null)),O=N.exports,A=l.a,z={name:"App",components:{paginaPrincipal:k,paginaLogin:S,nav1:O},mounted:function(){var t=this;this.$route.query.contrincante&&this.$router.push({path:"/game",query:this.$route.query}),this.socket.on("respLogin",(function(a){a&&(sessionStorage.id=a.idSession,t.user=a,t.logged=!0,A(".modal-login").modal("hide"))})),sessionStorage.id&&this.socket.emit("comprobarSesion",sessionStorage.id)},updated:function(){},data:function(){return{logged:!1,socket:u()(),mensajeError:"",user:{nick:"Ejemplo Nick"},notificaciones:{nada:{icon:"notifications_paused",text:"No hay notificaciones",ruta:"/"}}}},methods:{logueado:function(t){this.logged=t.logged,this.user=t.user},logout:function(){this.socket.emit("logout",sessionStorage.id),this.logged=!1,sessionStorage.removeItem("id")},addNotificacion:function(t){var a=Object.keys(t)[0];this.notificaciones[a]||(this.notificaciones.nada&&(delete this.notificaciones.nada,this.notificaciones.visto=!1),this.notificaciones=t,this.notificaciones.visto=!1),this.$forceUpdate()},removeNotification:function(t){delete this.notificaciones[t],1==Object.keys(this.notificaciones).length&&"visto"==Object.keys(this.notificaciones)[0]&&(this.notificaciones={nada:{icon:"notifications_paused",text:"No hay notificaciones",ruta:"/"}}),this.$forceUpdate()}},computed:{fueraJuego:function(){return"/game"!=this.$route.path}}},U=z,R=(e("034f"),Object(v["a"])(U,i,o,!1,null,null,null)),q=R.exports,J=e("43f9"),B=e.n(J),V=(e("51de"),e("d69d"),e("4989"),e("65e8"),e("b725"),e("2bb9"),e("ab8b"),e("8dbe"),e("8c4f")),G=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("md-app",[e("md-app-content",[e("div",{staticClass:"md-layout d-flex flex-column flex-nowrap justify-content-between",attrs:{id:"aplicacion"}},[e("div",{staticClass:"md-layout-item md-size-100 h-15"},[e("div",{staticClass:"md-layout h-100"},[e("div",{staticClass:"md-layout-item md-size-40 md-layout",class:{sombreado:t.turno}},[e("div",{staticClass:"md-layout md-layout-item md-size-30 d-flex flex-column justify-content-around centrado flex-nowrap"},[e("span",[e("b",[t._v("Media: "+t._s(t.miMedia))])])]),e("div",{staticClass:"md-layout-item md-size-70 d-flex flex-column align-items-center justify-content-around"},[e("span",{staticClass:"md-size-100 centrado"},[t._v(t._s(t.usuario))]),e("span",{staticClass:"md-display-3 puntuacion",attrs:{id:"marcador"}},[t._v(t._s(t.misPuntos))])])]),e("div",{staticClass:"md-layout-item md-size-20 md-layout"},[e("span",{staticClass:"md-layout-item md-size-100 md-display-1 centrado"},[t._v(t._s(t.miMarcador)+" - "+t._s(t.marcadorContrincante))]),e("div",{staticClass:"md-layout-item md-size-100 md-layout"},[e("div",{staticClass:"md-layout-item md-size-60 md-small-size-100 divInput"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],attrs:{type:"text",disabled:!t.turno,id:"inputPuntos",placeholder:"Introduce tu puntuación",autofocus:""},domProps:{value:t.input},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.enter(a)},input:function(a){a.target.composing||(t.input=a.target.value)}}})]),e("div",{staticClass:"md-layout-item md-size-40 md-small-size-100 divInput"},[e("md-button",{staticClass:"md-raised md-primary",attrs:{disabled:t.validar,id:"botonPuntos"},on:{click:t.enviarPuntuacion}},[t._v("Enviar")])],1)])]),e("div",{staticClass:"md-layout-item md-size-40 md-layout",class:{sombreado:!t.turno}},[e("div",{staticClass:"md-layout md-layout-item md-size-70 d-flex flex-column align-items-center justify-content-around"},[e("span",{staticClass:"md-size-100 centrado"},[t._v(t._s(t.contrincante))]),e("span",{staticClass:"md-display-3 puntuacion",attrs:{id:"marcador"}},[t._v(t._s(t.puntosContrincante))])]),e("div",{staticClass:"md-layout md-layout-item md-size-30 d-flex flex-column justify-content-around centrado flex-nowrap"},[e("span",{staticClass:"centrado"},[e("b",[t._v("Media: "+t._s(t.mediaContrincante))])])])])])]),e("div",{staticClass:"md-layout-item md-size-100 flex-fill h-85 md-elevation-5",attrs:{id:"divCamaras"}},[e("video",{attrs:{id:"remote",autoplay:""}}),e("video",{staticClass:"md-elevation-5",attrs:{id:"local",autoplay:"",muted:""},domProps:{muted:!0}})]),e("div",{staticClass:"modal fade modal-datos",attrs:{id:"modalDatosPartida","data-backdrop":"static","data-keyboard":"false",tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content p-2"},[e("div",{staticClass:"modal-header mb-2"},[e("h1",{staticClass:"modal-title"},[t._v("Ajustes de juego")])]),e("div",{staticClass:"modal-body"},[e("form",{attrs:{action:"",method:"post"},on:{submit:function(a){return a.preventDefault(),t.enviarDatosPartida()}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"nPartidas"}},[t._v("Nº de partidas")]),e("select",{staticClass:"form-control",attrs:{name:"nPartidas",id:"nPartidas"}},[e("option",[t._v("1")]),e("option",[t._v("3")]),e("option",[t._v("5")]),e("option",[t._v("7")]),e("option",[t._v("9")])]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"jugadorSalida"}},[t._v("¿Qué Jugador sale?")]),e("select",{staticClass:"form-control",attrs:{name:"jugadorSalida",id:"jugadorSalida"}},[e("option",{attrs:{id:"selectSalida1"}}),e("option",{attrs:{id:"selectSalida2"}})])])]),e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Enviar")])])])])])])]),e("div",{staticClass:"modal fade modal-datos",attrs:{id:"modalFinDelJuego","data-backdrop":"static","data-keyboard":"false",tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content p-2"},[e("div",{staticClass:"modal-header mb-2"},[e("h1",{staticClass:"modal-title"},[t._v("Fin del Juego!")])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 d-flex align-items-center justify-content-center"},[e("span",{staticClass:"md-layout-item md-size-100 md-display-1 centrado"},[t._v(t._s(t.miMarcador)+" - "+t._s(t.marcadorContrincante))])]),e("div",{staticClass:"col-6 d-flex justify-content-center"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h3",{staticClass:"centrado"},[t._v(t._s(t.usuario))]),e("span",{staticClass:"centrado"},[e("b",[t._v("Media: "+t._s(t.miMedia))])])])])]),e("div",{staticClass:"col-6 d-flex justify-content-center"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h3",{staticClass:"centrado"},[t._v(t._s(t.contrincante))]),e("span",{staticClass:"centrado"},[e("b",[t._v("Media: "+t._s(t.mediaContrincante))])])])])])]),e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(a){return t.salir()}}},[t._v("Salir")])])])])])])])])],1)},F=[],H=(e("ac1f"),e("466d"),e("96cf"),e("1da1")),Y=(e("d093"),l.a),Q={name:"Game",props:["conexion","user"],mounted:function(){var t=this;this.usuario=this.$route.query.id||"Jugador 1",this.contrincante=this.$route.query.contrincante||"Jugador 2",this.socket.emit("paginaJuego",this.$route.query.id),this.localVideo=document.getElementById("local"),this.remoteVideo=document.getElementById("remote"),this.remoteStream=new MediaStream,this.remoteVideo.srcObject=this.remoteStream,this.pc=new RTCPeerConnection(this.pcConf),this.pc.iceTransportPolicy="relay",this.pc.ontrack=function(){var a=Object(H["a"])(regeneratorRuntime.mark((function a(e){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.remoteStream.addTrack(e.track,t.remoteStream);case 1:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}(),this.pc.onicecandidate=function(a){a.candidate&&t.socket.emit("candidate",a.candidate,t.contrincante)},Y("#selectSalida1").html(this.usuario),Y("#selectSalida2").html(this.contrincante),this.socket.on("preparado",Object(H["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.t0=t.pc,a.next=4,t.pc.createOffer();case 4:return a.t1=a.sent,a.next=7,a.t0.setLocalDescription.call(a.t0,a.t1);case 7:t.socket.emit("offer",t.pc.localDescription,t.contrincante),a.next=13;break;case 10:a.prev=10,a.t2=a["catch"](0),console.log("Error: "+a.t2);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))),this.socket.on("AjustarPartida",(function(){t.modalOpcionesPartida()})),this.socket.on("offer",function(){var a=Object(H["a"])(regeneratorRuntime.mark((function a(e){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.pc.setRemoteDescription(e).then((function(){return t.pc.createAnswer()})).then((function(a){return t.pc.setLocalDescription(a)})).then((function(){t.socket.emit("answer",t.pc.localDescription,t.contrincante)}));case 2:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()),this.socket.on("candidate",(function(a){t.pc.addIceCandidate(new RTCIceCandidate(a)).catch((function(t){return console.error(t)}))})),this.socket.on("answer",(function(a){t.pc.setRemoteDescription(a),t.modalOpcionesPartida()})),this.socket.on("comenzarPartida",(function(a){console.log(a),t.partida=a,t.partida.turno==t.id&&document.getElementById("inputPuntos").focus()})),this.socket.on("ganador",(function(a){console.log("ganador"),t.marcador[a]++})),this.socket.on("tirada",(function(a){t.partida=a,t.partida.turno==t.id&&document.getElementById("inputPuntos").focus()})),this.socket.on("findeljuego",(function(a){t.partida=a,console.log("Fin del juego"),Y("#modalFinDelJuego").appendTo("body").modal("show")})),this.getUserMediaDevices()},data:function(){return{socket:this.conexion,usuario:null,pc:null,localVideo:null,remoteVideo:null,localStream:null,remoteStream:null,contrincante:null,partida:{local:{puntos:501,nDardos:0,media:0},visitante:{puntos:501,nDardos:0,media:0},turno:null},marcador:{local:0,visitante:0},input:null,id:null,constraints:{audio:!0,video:!0},pcConf:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:168.63.17.113:3478",username:"davidmpuyol",credential:"davidmpuyol"}]},gettingUserMedia:!1}},methods:{salir:function(){window.close()},enviarPuntuacion:function(){var t={puntos:parseInt(this.input),dardos:3,idPartida:this.partida.idPartida};console.log(t),this.socket.emit("tirada",t,this.usuario,this.contrincante),this.input=null},getUserMediaDevices:function(){var t=this;return Object(H["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.gettingUserMedia=!0,a.next=3,navigator.mediaDevices.getUserMedia(t.constraints).then(t.getUserMediaSuccess).catch(t.getUserMediaError);case 3:case"end":return a.stop()}}),a)})))()},modalOpcionesPartida:function(){Y("#modalDatosPartida").appendTo("body").modal("show")},enviarDatosPartida:function(){var t=document.getElementById("jugadorSalida").value,a=document.getElementById("nPartidas").value;Y("#modalDatosPartida").modal("hide"),this.socket.emit("comenzarPartida",this.usuario,this.contrincante,{nPartidas:a,salida:t})},getUserMediaSuccess:function(t){var a=this;this.localStream=t,this.gettingUserMedia=!1,t.getTracks().forEach((function(e){a.pc.addTrack(e,t)})),this.localVideo.srcObject=t,this.socket.emit("preparado",this.contrincante)},getUserMediaError:function(t){console.error(t),this.gettingUserMedia=!1},enter:function(){this.validar||this.enviarPuntuacion()}},computed:{validar:function(){if(!this.input)return!0;if(!this.input.match(/^[0-9]*$/))return!0;var t=parseInt(this.input);return t<0||t>180||t>this.partida[this.partida.turno].puntos},turno:function(){return!this.partida.turno||this.usuario==this.partida.turno},textoTurno:function(){return this.partida.turno?this.usuario==this.partida.turno?"Es tu turno, introduce tu puntuación":"Espera a que el oponente tire":"cargando"},miMedia:function(){return this.partida[this.usuario]?this.partida[this.usuario].media:0},mediaContrincante:function(){return this.partida[this.contrincante]?this.partida[this.contrincante].media:0},misPuntos:function(){return this.partida[this.usuario]?this.partida[this.usuario].puntos:501},puntosContrincante:function(){return this.partida[this.contrincante]?this.partida[this.contrincante].puntos:501},miMarcador:function(){return this.partida[this.usuario]?this.partida[this.usuario].marcador:0},marcadorContrincante:function(){return this.partida[this.contrincante]?this.partida[this.contrincante].marcador:0}}},W=Q,K=(e("35cc"),Object(v["a"])(W,G,F,!1,null,"07bd033d",null)),X=K.exports,Z=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"torneos"},[this.user.tipo_usuario>=2?e("section",[e("md-button",{staticClass:"md-raised md-primary",attrs:{id:"botonCrearTorneo"},on:{click:this.modalCrearTorneo}},[t._v("Crear torneo")])],1):t._e(),e("section",{staticClass:"m-3 m-md-4 m-lg-5",attrs:{id:"buscador"}},[e("div",{staticClass:"input-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.fTipo,expression:"fTipo"}],attrs:{id:"selectTipo"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.fTipo=a.target.multiple?e:e[0]}}},[e("option",{attrs:{value:""}},[t._v("Todos")]),e("option",{attrs:{value:"1"}},[t._v("Comunidad")]),e("option",{attrs:{value:"2"}},[t._v("Oficial")])]),e("div",{staticClass:"input-group-append",attrs:{id:"inputBuscador"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.fNombre,expression:"fNombre"}],staticClass:"input-group-text w-100",attrs:{type:"text"},domProps:{value:t.fNombre},on:{input:function(a){a.target.composing||(t.fNombre=a.target.value)}}})])])]),e("section",{staticClass:"row m-0"},t._l(this.listaTorneos,(function(t){return e("cardTorneo",{staticClass:"cardTorneo col-lg-2 col-sm-4 col-12 p-0",attrs:{torneo:t}})})),1),this.user.tipo_usuario>=2?e("div",{staticClass:"modal fade modal-crearTorneo",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content"},[t._m(0),e("div",{staticClass:"modal-body"},[e("form",{attrs:{action:"",method:"post"},on:{submit:function(a){return a.preventDefault(),t.crearTorneo()}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"nick"}},[t._v("Nombre del torneo")]),e("input",{directives:[{name:"model",rawName:"v-model:value",value:t.nombreTorneo,expression:"nombreTorneo",arg:"value"}],staticClass:"form-control",attrs:{type:"text",id:"nombreTorneo",placeholder:"Introduce el nombre del torneo",required:""},domProps:{value:t.nombreTorneo},on:{input:function(a){a.target.composing||(t.nombreTorneo=a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"nick"}},[t._v("Numero de jugadores")]),e("input",{directives:[{name:"model",rawName:"v-model:value",value:t.nParticipantes,expression:"nParticipantes",arg:"value"}],staticClass:"form-control",attrs:{type:"number",id:"numeroDeParticipantes",max:"32",placeholder:"Introduce el numero de participantes",required:""},domProps:{value:t.nParticipantes},on:{input:function(a){a.target.composing||(t.nParticipantes=a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"nick"}},[t._v("Fecha de cierre de inscripción")]),e("date-picker",{attrs:{config:t.options},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}})],1),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"siofu_input"}},[t._v("Imagen torneo")]),e("br"),e("input",{class:t.habilitarSubirFoto,attrs:{type:"file",id:"siofu_input"}}),e("i",{class:t.iconoSubirArchivo})]),e("div",{staticClass:"alert ",attrs:{role:"alert"}},[t._v(" "+t._s(t.textoAlert)+" ")]),e("md-button",{class:t.habilitarEnviar,attrs:{type:"submit"}},[t._v("Enviar")])],1)])])])]):t._e(),this.user.tipo_usuario>=2?e("div",{staticClass:"modal fade modal-misTorneos",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[t._m(1)]):t._e()])},tt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header mb-2"},[e("h1",{staticClass:"modal-title"},[t._v("Crear Torneo")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header mb-2"},[e("h1",{staticClass:"modal-title"},[t._v("Registro")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])]),e("div",{staticClass:"modal-body"})])])}],at=(e("b0c0"),e("5319"),e("1276"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card"},[e("img",{staticClass:"card-img-top imagen",attrs:{src:t.imagenTorneo,alt:"Card image cap"}}),e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v(t._s(t.torneo.nombre))]),e("md-button",{staticClass:"md-raised b-0",on:{click:this.detalle}},[t._v("Ver detalles")])],1)])}),et=[],st={name:"card-torneo",props:["torneo"],mounted:function(){},data:function(){return{}},methods:{detalle:function(){this.$router.push({path:"torneos/"+this.torneo._id})}},computed:{imagenTorneo:function(){return"./img/torneos/"+this.torneo.img}}},it=st,ot=(e("0910"),Object(v["a"])(it,at,et,!1,null,"254116e3",null)),nt=ot.exports,rt=e("9bcd"),ct=e.n(rt),lt={name:"torneos",props:["conexion","user"],components:{cardTorneo:nt},mounted:function(){var t=this;this.conexion.on("resultadoTorneos",(function(a){t.torneos=a})),this.conexion.emit("getTorneos");var a=new ct.a(this.conexion);a.listenOnInput(document.getElementById("siofu_input")),a.addEventListener("start",(function(a){t.subeImagen=!0;var e=Math.round(100*Math.random()),s="."+a.file.name.split(".")[1];a.file.meta.path="/torneos/"+t.user.nick+e+t.nombreTorneo.replace(/ /g,"")+s,a.file.meta.nombre=t.user.nick+e+t.nombreTorneo.replace(/ /g,"")+s,t.iconoSubirArchivo="far fa-times-circle text-danger"})),this.conexion.on("imagenSubida",(function(a){t.nuevaImagen=a,t.subida=!0,t.iconoSubirArchivo="fas fa-check-circle text-success"})),this.conexion.on("respuestaRegistrarseTorneo",(function(a){a[1]?(t.mostrarAlerta(a[1],"alert-success"),t.conexion.emit("getTorneos")):t.mostrarAlerta(a[0],"alert-danger")}))},data:function(){return{torneos:[],fNombre:"",iconoSubirArchivo:"",fTipo:"",subeImagen:!1,subida:!1,nuevaImagen:"",nombreTorneo:"",nParticipantes:0,textoAlert:"",date:new Date,options:{format:"YYYY-MM-DD h:mm a",useCurrent:!1}}},beforeDestroy:function(){this.conexion.off("resultadoTorneos")},methods:{crearTorneo:function(){var t={};t.user=this.user.nick,t.nombre=this.nombreTorneo,t.img=this.nuevaImagen,t.fecha=Date.parse(this.date),t.tipoUsuario=this.user.tipo_usuario,t.maxJugadores=this.nParticipantes,this.conexion.emit("crearTorneo",t)},modalCrearTorneo:function(){$(".modal-crearTorneo").modal("show")},misTorneos:function(){},mostrarAlerta:function(t,a){$(".alert").addClass(a),this.textoAlert=t,$(".alert").show(500),setTimeout((function(){$(".alert").hide(500)}),3e3)}},computed:{listaTorneos:function(){var t=this;return this.torneos.filter((function(a){if(""!=t.fTipo){if(a.tipo==t.fTipo&&a.nombre.includes(t.fNombre))return a}else if(a.nombre.includes(t.fNombre))return a}))},habilitarSubirFoto:function(){return 0==this.nombreTorneo.length?"inputTexto disabled":"inputTexto"},habilitarEnviar:function(){return this.subida?"md-raised md-primary":"md-raised md-primary disabled"}}},dt=lt,ut=(e("cd14"),Object(v["a"])(dt,Z,tt,!1,null,"e3dedae4",null)),mt=ut.exports,ft=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},pt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("main",[e("main",{staticClass:"container-fluid"},[e("h2",{staticClass:"text-center mt-3 tituloDirecto"},[t._v("Destacados")]),e("section",{staticClass:"contenedorCarousel"},[e("div",{staticClass:"carouselDirectos"},[e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"})])]),e("h2",{staticClass:"text-center mt-3 tituloDirecto"},[t._v("Torneos")]),e("section",{staticClass:"contenedorCarousel"},[e("div",{staticClass:"carouselDirTorneos"},[e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"})])]),e("div",{staticClass:"w-100 d-flex justify-content-center botAnim",attrs:{id:"botonMasTorneos"}},[e("button",{staticClass:"center"},[t._v("Ver más")])]),e("h2",{staticClass:"text-center mt-3 tituloDirecto"},[t._v("Partida Rapida")]),e("section",{staticClass:"contenedorCarousel"},[e("div",{staticClass:"carouselDirPartRapida"},[e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"}),e("div",{staticClass:"torneoC"})])]),e("div",{staticClass:"w-100 d-flex justify-content-center botAnim",attrs:{id:"botonMasPartRapidas"}},[e("button",{staticClass:"center"},[t._v("Ver más")])])])])}],ht=l.a,vt={name:"directos",props:[],mounted:function(){ht(".carouselDirectos").slick({centerMode:!0,arrows:!0,centerPadding:"60px",slidesToShow:3,responsive:[{breakpoint:768,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:1}},{breakpoint:480,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:1}}]}),ht(".carouselDirTorneos").slick({dots:!0,infinite:!1,speed:300,slidesToShow:3,slidesToScroll:3,adaptiveHeight:!0,responsive:[{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}),ht(".carouselDirPartRapida").slick({dots:!0,infinite:!1,speed:300,slidesToShow:3,slidesToScroll:3,adaptiveHeight:!0,responsive:[{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})},data:function(){return{}},methods:{},computed:{}},bt=vt,gt=(e("2a7d"),Object(v["a"])(bt,ft,pt,!1,null,"36fb52f2",null)),Ct=gt.exports,_t=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",{staticClass:"perfil"},[this.cargado?s("div",{staticClass:"row m-0"},[s("section",{staticClass:"col-12 col-sm-4 sombraInset d-flex align-items-center flex-column p-0",attrs:{id:"datosUser"}},[s("div",{staticClass:"borde-animado-perfil sombra mb-2",attrs:{id:"fotoUser"}},[s("img",{staticClass:"imgPerfil",attrs:{src:this.userImage}})]),s("h3",{staticClass:"w-100 text-center"},[t._v(t._s(t.nick))]),t.user.nick==t.nick?s("md-button",{staticClass:"md-raised b-0",on:{click:this.abrirModal}},[t._v("Editar perfil")]):t._e(),s("div",{staticClass:"d-flex flex-column w-75",attrs:{id:"statsResumidas"}},[s("div",{staticClass:"d-flex align-items-center justify-content-around",attrs:{id:"victoriasStats"}},[s("img",{staticClass:"iconosPerfil",attrs:{src:e("f654"),title:"Victorias"}}),s("p",{staticClass:"parrafosStats m-0"},[t._v(t._s(t.datosUsuario.nVictorias))])]),s("div",{staticClass:"d-flex align-items-center justify-content-around",attrs:{id:"derrotasStats"}},[s("img",{staticClass:"iconosPerfil",attrs:{src:e("5891"),title:"Derrotas"}}),s("p",{staticClass:"parrafosStats m-0"},[t._v(t._s(t.datosUsuario.nDerrotas))])]),s("div",{staticClass:"d-flex align-items-center justify-content-around",attrs:{id:"derrotasStats"}},[s("p",{staticClass:"parrafosStats porcentaje m-0"},[t._v("%")]),s("p",{staticClass:"parrafosStats m-0"},[t._v(t._s(t.datosUsuario.porcentajeVictorias)+"%")])])])],1),s("section",{staticClass:"col-12 col-sm-8 overflow-auto sombraInsetComp p-3",attrs:{id:"graficosEstadisticas"}},[s("h2",{staticClass:"text-center"},[t._v("Total partidas jugadas")]),s("p",{staticClass:"parrafosStats text-center"},[t._v(t._s(t.datosUsuario.nPartidas))]),s("h2",{staticClass:"text-center"},[t._v("Ultimas partidas")]),s("md-list",t._l(this.partidasOrdenadas,(function(a,e){return s("md-list-item",[s("span",{staticClass:"md-list-item-text"},[t._v(t._s(t.$moment(a.fecha).format("YYYY-MM-DD h:mm a")))]),s("md-button",{staticClass:"md-icon-button md-list-action mr-0",on:{click:function(a){return t.verDetallePartida(e)}}},[s("md-icon",[t._v("analytics")])],1)],1)})),1)],1)]):s("div",[s("p",{staticClass:"text-center"},[t._v("No se encontro el perfil >:( ")])]),s("div",{staticClass:"modal fade modal-detalle",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg"},[s("div",{staticClass:"modal-content"},[t._m(0),s("div",{staticClass:"modal-body"},[s("h2",[t._v(t._s(t.jugadoresPartida[0])+" VS "+t._s(t.jugadoresPartida[1]))]),s("p",[s("strong",[t._v("Ganador/a:")]),t._v(" "+t._s(t.ganadorDetallePartida))]),s("p",[s("strong",[t._v("Numero de partidas:")]),t._v(" "+t._s(t.numeroPartidasDetalle))]),s("div",{attrs:{id:"chart"}},[s("apexchart",{key:t.renderGrafico,ref:"barchart",attrs:{type:"line",height:"350",width:"100%",options:t.chartOptions,series:t.series}})],1)])])])]),t.user.nick==t.nick?s("div",{staticClass:"modal fade modal-perfil",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg"},[s("div",{staticClass:"modal-content"},[t._m(1),s("div",{staticClass:"modal-body"},[s("form",{attrs:{action:"",method:"post"},on:{submit:function(a){return a.preventDefault(),t.cambiarDatos()}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"nick"}},[t._v("Nick")]),s("input",{directives:[{name:"model",rawName:"v-model:value",value:t.modalNick,expression:"modalNick",arg:"value"}],staticClass:"form-control",attrs:{type:"text",id:"nick",name:"text",placeholder:"Introduce tu nuevo nick",required:""},domProps:{value:t.modalNick},on:{input:function(a){a.target.composing||(t.modalNick=a.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"siofu_input"}},[t._v("Cambiar imagen perfil")]),s("br"),s("input",{staticClass:"inputTexto",attrs:{type:"file",id:"siofu_input"}}),t._v(" "),s("i",{class:t.iconoSubirArchivo})]),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model:value",value:t.pass,expression:"pass",arg:"value"}],staticClass:"form-control",attrs:{type:"password",id:"nick",name:"text",placeholder:"Introduce tu contraseña para validar",required:""},domProps:{value:t.pass},on:{input:function(a){a.target.composing||(t.pass=a.target.value)}}})]),s("div",{staticClass:"alert ",attrs:{role:"alert"}},[t._v(" "+t._s(t.textoAlert)+" ")]),s("button",{class:t.cambioDatosListo,attrs:{type:"submit"}},[t._v("Enviar")])])])])])]):t._e()])},yt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header mb-2"},[e("h1",{staticClass:"modal-title"},[t._v("Detalle")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header mb-2"},[e("h1",{staticClass:"modal-title"},[t._v("Cambiar Datos")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])])}],jt={name:"perfil",props:["nick","conexion","user"],mounted:function(){var t=this;if(this.user.nick==this.nick){var a=new ct.a(this.conexion);a.listenOnInput(document.getElementById("siofu_input")),a.addEventListener("start",(function(a){t.subeImagen=!0;var e="."+a.file.name.split(".")[1];a.file.meta.path="/usuarios/"+t.user.nick+e,a.file.meta.nombre=t.user.nick+e,t.iconoSubirArchivo="far fa-times-circle text-danger",console.log(a)})),this.conexion.on("imagenSubida",(function(a){t.nuevaImagen=a,t.subida=!0,t.iconoSubirArchivo="fas fa-check-circle text-success"})),this.conexion.on("respuestaCambioDatos",(function(a){a[1]?(t.mostrarAlerta(a[1],"alert-success"),t.pass="",setTimeout((function(){$(".modal-perfil").modal("hide"),t.$router.push("/")}),1e3)):t.mostrarAlerta(a[0],"alert-danger")}))}this.conexion.on("respDatosPerfil",(function(a){t.datosUsuario=a,console.log(t.datosUsuario),a.error?t.cargado=!1:t.cargado=!0})),this.conexion.on("respuestaPartidas",(function(a){console.log("han llegado las partidas"),console.log(a),t.partidas=a})),this.conexion.on("repuestaNicksUsuarios",(function(a){console.log("ha llegado el nick de los jugadores"),console.log(a),t.$set(t.jugadoresPartida,0,a[0].nick),t.$set(t.jugadoresPartida,1,a[1].nick),t.crearDetallePartida(t.indexDetalle)})),this.conexion.emit("obtenerPartidas",this.nick),console.log(this.nick),this.conexion.emit("solicitarDatosPerfil",this.nick)},beforeDestroy:function(){this.conexion.off("respDatosPerfil"),this.conexion.off("respuestaPartidas"),this.conexion.off("repuestaNicksUsuarios")},data:function(){return{cargado:!1,datosUsuario:{img:"null"},modalNick:this.nick,iconoSubirArchivo:"",subeImagen:!1,subida:!1,nuevaImagen:"",pass:"",textoAlert:"",renderGrafico:0,partidas:[],indexDetalle:0,ganadorDetallePartida:"",numeroPartidasDetalle:0,jugadoresPartida:["jugador1","jugador2"],series:[{name:"Media de puntos",type:"column",data:[]},{name:"Rondas Ganadas",type:"line",data:[]}],chartOptions:{chart:{type:"line",height:350,width:"100%",redrawOnParentResize:!0},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!0},labels:[],xaxis:{categories:[]}}}},methods:{abrirModal:function(){$(".modal-perfil").modal("show")},cambiarDatos:function(){var t={};t.nick=this.user.nick,t.nuevoNick=this.modalNick,t.img=this.nuevaImagen,t.pass=this.pass,this.conexion.emit("cambiarDatosPerfil",t)},mostrarAlerta:function(t,a){$(".alert").addClass(a),this.textoAlert=t,$(".alert").show(500),setTimeout((function(){$(".alert").hide(500)}),3e3)},verDetallePartida:function(t){this.conexion.emit("obtenerUsuarios",this.partidas[t].jugadores),this.indexDetalle=t},crearDetallePartida:function(t){var a=this;console.log(this.partidas[t].puntuacion[0].rondasGanadas),$(".modal-detalle").modal("show"),this.series[0].data=[],this.series[1].data=[],this.chartOptions.labels=[],this.series[0].data.push(this.partidas[t].puntuacion[0].media),this.series[0].data.push(this.partidas[t].puntuacion[1].media),this.series[1].data.push(this.partidas[t].puntuacion[0].rondasGanadas),this.series[1].data.push(this.partidas[t].puntuacion[1].rondasGanadas),this.chartOptions.labels.push(this.jugadoresPartida[0]),this.chartOptions.labels.push(this.jugadoresPartida[1]),this.partidas[t].jugadores.forEach((function(e,s){e==a.partidas[t].ganador&&(a.ganadorDetallePartida=a.jugadoresPartida[s])})),this.numeroPartidasDetalle=this.partidas[t].numero_partidas,this.renderGrafico++,$(".modal-body").addClass("recargarModal"),setTimeout((function(){$(".modal-body").removeClass("recargarModal")}),200)}},computed:{userImage:function(){return"./img/usuarios/"+this.datosUsuario.img},cambioDatosListo:function(){return this.subeImagen&&!this.subida?"btn btn-primary disabled":"btn btn-primary"},partidasOrdenadas:function(){return this.partidas.length>1?this.partidas.sort((function(t,a){var e=t.fecha,s=a.fecha;return e<s?-1:e>s?1:0})):this.partidas}}},kt=jt,xt=(e("8644"),Object(v["a"])(kt,_t,yt,!1,null,"6c578869",null)),wt=xt.exports,Tt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"detalle-torneo",style:t.cssVars},[e("section",{staticClass:"d-flex align-items-center justify-content-center sombraInsetComp",attrs:{id:"fondotorneo"}},[e("h2",{attrs:{id:"tituloTorneo"}},[t._v(t._s(t.datosTorneo.nombre))])]),e("article",{staticClass:"container pt-5",attrs:{id:"datos"}},[e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("p",[e("strong",[t._v("Jugadores:")]),t._v(" "+t._s(t.nJugadores)+" / "+t._s(t.datosTorneo.max_jugadores))]),this.user.tipo_usuario>=2?e("md-button",{staticClass:"md-raised b-0",on:{click:this.borrar}},[t._v("Borrar Torneo")]):t._e(),this.user.tipo_usuario>=1?e("md-button",{staticClass:"md-raised b-0",on:{click:this.apuntarse}},[t._v("Apuntarse Torneo")]):t._e()],1),e("p",[e("strong",[t._v("Fecha de cierre: ")]),t._v(t._s(t.tiempo))]),e("div",{staticClass:"alert ",attrs:{role:"alert"}},[t._v(" "+t._s(t.textoAlert)+" ")]),t.rounds!=[]?e("bracket",{attrs:{rounds:t.rounds},scopedSlots:t._u([{key:"player",fn:function(a){return[t._v(" "+t._s(a.player.name)+" "),a.player.mostrarBoton&&t.user.tipo_usuario>=4?e("button",{on:{click:function(e){return t.ganador(a)}}},[t._v("Win")]):t._e()]}}],null,!1,4212240024)}):t._e(),e("md-button",{staticClass:"md-raised b-0",on:{click:this.abrirLista}},[t._v("Ver Jugadores")]),e("md-list",{staticClass:"md-double-line border",attrs:{id:"listaJugadores"}},t._l(this.datosTorneo.jugadores,(function(a){return e("md-list-item",[e("label",[t._v(t._s(a.nick))]),e("md-button",{staticClass:"ml-2 md-icon-button md-list-action",on:{click:function(e){return t.$router.replace({path:"/perfil/"+a.nick})}}},[e("md-icon",[t._v("account_circle")])],1)],1)})),1)],1)])},$t=[],It=(e("fb6a"),e("b65f"),e("5e97")),Pt=e.n(It),St={name:"detalle-torneo",props:["id","conexion","user"],components:{Bracket:Pt.a},mounted:function(){var t=this;console.log(this.relojActivo),this.conexion.on("resultadoTorneo",(function(a){if(t.torneo=a,console.log(a),a.fecha>Date.now()){var e=new Date(a.fecha);t.tiempo=e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}else t.tiempo="Cerrado",t.desabilitado=!0,t.rounds=a.bracket,a.bracket.length<=1&&a.abierto&&t.user.tipo_usuario>=4&&t.dibujarTorneo(a)})),this.conexion.on("respuestaApuntarse",(function(a){a[1]?(t.mostrarAlerta(a[1],"alert-success"),t.conexion.emit("detalleTorneo",t.id)):t.mostrarAlerta(a[0],"alert-danger")})),this.conexion.emit("detalleTorneo",this.id)},beforeDestroy:function(){this.conexion.off("resultadoTorneo"),this.conexion.off("respuestaApuntarse")},data:function(){return{torneo:{},textoAlert:"",tiempo:0,relojActivo:!1,desabilitado:!1,rounds:[]}},updated:function(){},methods:{abrirLista:function(){$("#listaJugadores").is(":visible")?$("#listaJugadores").hide(600):$("#listaJugadores").show(600)},apuntarse:function(){this.desabilitado?this.mostrarAlerta("La fase de ingreso esta cerrada","alert-danger"):this.conexion.emit("apuntarseTorneo",{idTorneo:this.id,nickJugador:this.user.nick})},borrar:function(){this.conexion.emit("borrarTorneo",this.torneo._id)},mostrarAlerta:function(t,a){$(".alert").removeClass("alert-success"),$(".alert").removeClass("alert-danger"),$(".alert").addClass(a),this.textoAlert=t,$(".alert").show(500),setTimeout((function(){$(".alert").hide(500)}),3e3)},dibujarTorneo:function(t){var a=t.jugadores.slice(),e=[4,8,16,32];e.includes(a.length)||$(e).each((function(t,e){if(a.length<e){while(a.length!=e)a.push({nick:"Bye"});return!1}}));for(var s=a.length,i=s/2,o=i/2,n=[],r=0;r<=o;r++){for(var c=parseInt(i/(r+1)),l=[],d=0;d<c;d++){var u={fila:d};if(a.length>0){var m=a.shift();u.player1={id:m.nick,name:m.nick,fila:d,columna:r,player:1,mostrarBoton:!0},m=a.shift(),u.player2={id:m.nick,name:m.nick,fila:d,columna:r,player:2,mostrarBoton:!0}}else u.player1={id:parseInt(100*Math.random()),name:" ",fila:d,columna:r,player:1,mostrarBoton:!1},u.player2={id:parseInt(100*Math.random()),name:" ",fila:d,columna:r,player:2,mostrarBoton:!1};l.push(u)}n.push({columna:r,games:l})}this.rounds=n,this.conexion.emit("actualizarTorneo",{id:this.torneo._id,bracket:this.rounds})},ganador:function(t){var a=t.player.fila,e=t.player.columna,s=Math.trunc(a/2),i=a%2==0?1:2,o=e+1;1==i?(this.rounds[o].games[s].player1.name=t.player.name,this.rounds[o].games[s].player1.id=t.player.name):(this.rounds[o].games[s].player2.name=t.player.name,this.rounds[o].games[s].player2.id=t.player.name),this.rounds[e].games[a].player1.mostrarBoton=!1,this.rounds[e].games[a].player2.mostrarBoton=!1,1!=i?(this.rounds[e].games[a].player1.winner=!0,this.rounds[e].games[a].player2.winner=!1):(this.rounds[e].games[a].player1.winner=!1,this.rounds[e].games[a].player2.winner=!0)," "!=this.rounds[o].games[s].player1.name&&" "!=this.rounds[o].games[s].player2.name&&this.rounds.length!=o+1&&(this.rounds[o].games[s].player2.mostrarBoton=!0,this.rounds[o].games[s].player1.mostrarBoton=!0),this.conexion.emit("actualizarTorneo",{id:this.torneo._id,bracket:this.rounds})}},computed:{cssVars:function(){return{"--bg-img":"url(../img/torneos/"+this.torneo.img+")"}},datosTorneo:function(){return this.torneo},nJugadores:function(){return this.torneo.jugadores?this.torneo.jugadores.length:0}}},Dt=St,Et=(e("1af4"),Object(v["a"])(Dt,Tt,$t,!1,null,"b3e1b82e",null)),Mt=Et.exports,Lt=e("133f"),Nt=e.n(Lt),Ot=(e("f9e3"),e("ca56"),e("15f5"),e("7051"),e("1321")),At=e.n(Ot);window.$=l.a,window.jQuery=l.a;var zt=e("c1df");zt().format(),s["default"].prototype.$moment=zt,s["default"].use(Nt.a),window.$=$,s["default"].component("apexchart",At.a),s["default"].config.productionTip=!1,s["default"].use(V["a"]),s["default"].use(B.a),$().extend(!0,$.fn.datetimepicker.defaults,{icons:{time:"far fa-clock",date:"far fa-calendar",up:"fas fa-arrow-up",down:"fas fa-arrow-down",previous:"fas fa-chevron-left",next:"fas fa-chevron-right",today:"fas fa-calendar-check",clear:"far fa-trash-alt",close:"far fa-times-circle"}});var Ut=[{path:"/",component:k},{path:"/game",component:X,props:!0},{path:"/torneos",component:mt},{path:"/directos",component:Ct},{path:"/perfil/:nick",component:wt,props:!0},{path:"/torneos/:id",component:Mt,props:!0}],Rt=new V["a"]({mode:"history",routes:Ut});new s["default"]({router:Rt,render:function(t){return t(q)}}).$mount("#app")},5891:function(t,a,e){t.exports=e.p+"img/derrotas.b76180f5.png"},"5f7e":function(t,a,e){t.exports=e.p+"img/p5.b63e4a9b.jpg"},"76f6":function(t,a,e){},"85ec":function(t,a,e){},8644:function(t,a,e){"use strict";var s=e("af08"),i=e.n(s);i.a},"9b8d":function(t,a,e){t.exports=e.p+"img/imgp2.a39c7cf5.png"},"9d14":function(t,a,e){},a8cb:function(t,a,e){"use strict";var s=e("5010"),i=e.n(s);i.a},af08:function(t,a,e){},b20b:function(t,a,e){},b436:function(t,a,e){t.exports=e.p+"img/imggp2.693bc2f6.png"},b7d1:function(t,a,e){"use strict";var s=e("1886"),i=e.n(s);i.a},cd14:function(t,a,e){"use strict";var s=e("5012"),i=e.n(s);i.a},cf05:function(t,a,e){t.exports=e.p+"img/logo.ab4d2697.png"},d706:function(t,a,e){"use strict";var s=e("76f6"),i=e.n(s);i.a},e575:function(t,a,e){},e784:function(t,a,e){"use strict";var s=e("2e2c"),i=e.n(s);i.a},f654:function(t,a,e){t.exports=e.p+"img/victorias.7876c0a9.png"},fe52:function(t,a,e){}});
//# sourceMappingURL=app.b4876699.js.map