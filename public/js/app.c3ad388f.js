(function(t){function e(e){for(var i,r,o=e[0],c=e[1],d=e[2],l=0,p=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},n={app:0},s=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"01ce":function(t,e,a){"use strict";var i=a("8fd8"),n=a.n(i);n.a},"034f":function(t,e,a){"use strict";var i=a("85ec"),n=a.n(i);n.a},1:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("game")},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("md-app",[a("md-app-content",{attrs:{id:"aplicacion"}},[a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-size-40"},[a("div",{staticClass:"md-layout",attrs:{id:"divPuntos"}},[a("div",{staticClass:"md-layout-item md-size-50 h-80"},[a("span",{staticClass:"md-display-4 puntuacion marcador",attrs:{id:"marcador1"}},[t._v(t._s(t.partida.local.puntos))]),a("h2",{staticClass:"md-display-3 marcadorlocal"},[t._v(t._s(t.marcador.local))]),a("md-list",{staticClass:"lista"},t._l(t.partida.local.tiradas,(function(e){return a("md-list-item",{key:e},[a("div",{staticClass:"md-list-item-text puntuacion md-subheading"},[t._v(" "+t._s(e)+" ")])])})),1)],1),a("div",{staticClass:"md-layout-item md-size-50 h-80"},[a("span",{staticClass:"md-display-4 puntuacion marcador"},[t._v(t._s(t.partida.visitante.puntos))]),a("h2",{staticClass:"md-display-3 marcadorvisitante"},[t._v(t._s(t.marcador.visitante))]),a("md-list",{staticClass:"lista"},t._l(t.partida.visitante.tiradas,(function(e){return a("md-list-item",{key:e},[a("div",{staticClass:"md-list-item-text puntuacion md-subheading"},[t._v(" "+t._s(e)+" ")])])})),1)],1),a("div",{staticClass:"md-layout-item md-size-100",attrs:{id:"estadisticas"}},[a("h2",{staticClass:"centrado"},[t._v("Estadísticas")]),a("div",{staticClass:"md-layout"},[a("br"),a("div",{staticClass:"md-layout-item md-size-50"},[a("h4",{staticClass:"centrado"},[a("b",[t._v("Media: "+t._s(t.partida.local.media))])])]),a("div",{staticClass:"md-layout-item md-size-50"},[a("h4",{staticClass:"centrado"},[a("b",[t._v("Media: "+t._s(t.partida.visitante.media))])])])])]),a("div",{staticClass:"md-layout-item md-size-100 h-20",attrs:{id:"inputPuntos"}},[a("div",{staticClass:"md-layout-item md-size-100 centrado"},[t._v(t._s(t.textoTurno))]),a("hr"),a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-size-70"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"input",attrs:{type:"text",disabled:t.turno,id:"puntuacion",placeholder:"Introduce tu puntuación",autofocus:""},domProps:{value:t.input},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enter(e)},input:function(e){e.target.composing||(t.input=e.target.value)}}})]),a("div",{staticClass:"md-layout-item md-size-30"},[a("md-button",{staticClass:"md-raised md-primary enviarPuntuacion",attrs:{disabled:t.validar},on:{click:t.enviarPuntuacion}},[t._v("Enviar")])],1)])])])]),a("div",{staticClass:"md-layout-item md-size-60",attrs:{id:"divCamaras"}},[a("video",{staticClass:"md-elevation-5",attrs:{id:"remote",autoplay:""}}),a("video",{staticClass:"md-elevation-5",attrs:{id:"local",autoplay:"",muted:""},domProps:{muted:!0}})])])])],1)},o=[],c=(a("ac1f"),a("466d"),a("8055")),d=a.n(c),u=(a("d093"),{name:"Game",props:[],mounted:function(){var t=this;console.log("adaptador");var e=document.getElementById("local");this.socket.on("preparado",(function(){t.pc=new RTCPeerConnection(t.pcConf),t.pc.addStream(e.srcObject),t.pc.createOffer().then((function(e){return t.pc.setLocalDescription(e)})).then((function(){t.socket.emit("offer",t.pc.localDescription)})),t.pc.ontrack=function(t){document.getElementById("remote").srcObject=t.streams[0]},t.id="local"})),this.socket.on("offer",(function(a){t.pc=new RTCPeerConnection(t.pcConf),t.pc.addStream(e.srcObject),t.pc.setRemoteDescription(a).then((function(){return t.pc.createAnswer()})).then((function(e){return t.pc.setLocalDescription(e)})).then((function(){t.socket.emit("answer",t.pc.localDescription)})),t.pc.ontrack=function(t){document.getElementById("remote").srcObject=t.streams[0]},t.pc.onicecandidate=function(e){e.candidate&&t.socket.emit("candidate",e.candidate)},t.id="visitante"})),this.socket.on("candidate",(function(e){t.pc.addIceCandidate(new RTCIceCandidate(e)).catch((function(t){return console.error(t)})),t.socket.emit("comenzarPartida")})),this.socket.on("answer",(function(e){t.pc.setRemoteDescription(e)})),this.socket.on("comenzarPartida",(function(e){console.log("comenzar partida"),t.partida=e,t.partida.turno==t.id&&document.getElementById("puntuacion").focus()})),this.socket.on("ganador",(function(e){t.marcador[e]++})),this.socket.on("tirada",(function(e){t.partida=e,t.partida.turno==t.id&&document.getElementById("puntuacion").focus()})),this.getUserMediaDevices()},data:function(){return{socket:d()(),pc:null,partida:{local:{puntos:501,nDardos:0,media:0},visitante:{puntos:501,nDardos:0,media:0},turno:null},marcador:{local:0,visitante:0},input:null,id:null,constraints:{audio:!0,video:{facingMode:"user"}},pcConf:{iceServers:[{urls:["stun:stun.l.google.com:19302"]}]},gettingUserMedia:!1}},methods:{enviarPuntuacion:function(){var t={puntos:parseInt(this.input),dardos:3};console.log(t),this.socket.emit("tirada",t),this.input=null},getUserMediaDevices:function(){var t=document.getElementById("local");t instanceof HTMLVideoElement&&(t.srcObject?(this.getUserMediaSuccess(t.srcObject),this.gettingUserMedia=!1):this.gettingUserMedia||t.srcObject||(this.gettingUserMedia=!0,navigator.mediaDevices.getUserMedia(this.constraints).then(this.getUserMediaSuccess).catch(this.getUserMediaError)))},getUserMediaSuccess:function(t){var e=document.getElementById("local");this.gettingUserMedia=!1,e instanceof HTMLVideoElement&&!e.srcObject&&(e.srcObject=t),this.socket.emit("preparado")},getUserMediaError:function(t){console.error(t),this.gettingUserMedia=!1},enter:function(){this.validar||this.enviarPuntuacion()}},computed:{validar:function(){if(!this.input)return!0;if(!this.input.match(/^[0-9]*$/))return!0;var t=parseInt(this.input);return t<0||t>180||t>this.partida[this.partida.turno].puntos},turno:function(){return!this.partida.turno||this.id!=this.partida.turno},textoTurno:function(){return this.partida.turno?this.id==this.partida.turno?"Es tu turno, introduce tu puntuación":"Espera a que el oponente tire":"cargando"}}}),l=u,p=(a("01ce"),a("2877")),m=Object(p["a"])(l,r,o,!1,null,"1faccc38",null),f=m.exports,v={name:"App",components:{Game:f}},h=v,g=(a("034f"),Object(p["a"])(h,n,s,!1,null,null,null)),y=g.exports,C=a("43f9"),b=a.n(C);a("51de"),a("d69d");i["default"].config.productionTip=!1,i["default"].use(b.a),new i["default"]({render:function(t){return t(y)}}).$mount("#app")},"85ec":function(t,e,a){},"8fd8":function(t,e,a){}});
//# sourceMappingURL=app.c3ad388f.js.map