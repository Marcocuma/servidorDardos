(function(t){function e(e){for(var s,n,r=e[0],c=e[1],l=e[2],u=0,m=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(m.length)m.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(s=!1)}s&&(o.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},i={app:0},o=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"02bf":function(t,e,a){},"034f":function(t,e,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},1:function(t,e){},"2a7d":function(t,e,a){"use strict";var s=a("fe52"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[this.fueraJuego?a("nav1",{attrs:{conexion:this.socket,nick:this.user.nick,img:this.user.img,logged:this.logged},on:{logueado:this.logueado,logout:this.logout}}):t._e(),this.logged?a("section",[a("router-view",{attrs:{conexion:this.socket,user:this.user}})],1):a("section",[a("h2",{staticClass:"text-center"},[t._v(t._s(this.mensajeError))])])],1)},o=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("main",{staticClass:"container-fluid"},[s("h1",{staticClass:"mt-1 mb-1 text-center",attrs:{id:"tituloChat"}},[t._v("Chat General")]),s("section",{staticClass:"d-flex row m-1",attrs:{id:"chat"}},[t._m(0),s("div",{staticClass:"col-12 col-md-5 p-0 overflow-auto"},[s("md-list",{attrs:{id:"usuarios"}},[s("md-list-item",[s("input",{attrs:{id:"checkboxLocal",type:"checkbox"},on:{click:t.cambiarEstado}}),s("md-avatar",{staticClass:"md-large"},[s("img",{attrs:{src:t.userImage,alt:t.user.nick}})]),s("div",{staticClass:"md-list-item-text"},[s("p",{staticClass:"text-center nombreUserLista"},[t._v(t._s(t.user.nick))])]),s("md-button",{staticClass:"ml-2 md-icon-button md-list-action",on:{click:function(e){return t.$router.push({path:"/perfil/"+t.user.nick})}}},[s("md-icon",[t._v("account_circle")])],1)],1),s("md-divider",{staticClass:"md-inset"}),s("md-list-item",[s("md-avatar",{staticClass:"md-large"},[s("img",{attrs:{src:a("5f7e"),alt:"General"}})]),s("div",{staticClass:"md-list-item-text"},[s("p",{staticClass:"text-center nombreUserLista"},[t._v("Chat General")])]),s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(e){return t.cambiarRoom("general")}}},[s("md-icon",[t._v("chat")])],1)],1),s("md-divider",{staticClass:"md-inset"}),t._l(this.usuarios,(function(e){return s("userChat",{key:e.id,attrs:{nick:e.nick,img:e.img,ready:e.ready},on:{cambiarSala:t.cambiarRoom,invitar:t.prepInvitar}})}))],2)],1)]),s("h2",{staticClass:"text-center mt-2 mb-2"},[t._v("Proximos torneos")]),t._m(1),s("div",{staticClass:"modal fade modal-invitar",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg"},[s("div",{staticClass:"modal-content p-2"},[s("div",{staticClass:"modal-header mb-2"},[s("h1",{staticClass:"modal-title"},[t._v(t._s(t.jugadorInvitar))]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])]),s("div",{staticClass:"modal-body"},[s("h3",{staticClass:"text-center"},[t._v(t._s(t.textoInvitar))]),s("div",{staticClass:"d-flex align-items-center justify-content-center"},[s("button",{staticClass:"btn btn-primary",attrs:{id:"botonInvitar"},on:{click:function(e){return t.invitar()}}},[t._v("Invitar")]),s("button",{staticClass:"btn btn-success",staticStyle:{display:"none"},attrs:{id:"botonJugar"},on:{click:function(e){return t.jugar()}}},[t._v("Jugar")])])])])])]),s("div",{staticClass:"modal fade modal-invitado",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg"},[s("div",{staticClass:"modal-content p-2"},[s("div",{staticClass:"modal-header mb-2"},[s("h1",{staticClass:"modal-title"},[t._v(t._s(t.jugadorInvitar))]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])]),s("div",{staticClass:"modal-body"},[s("h3",{staticClass:"text-center"},[t._v(t._s(t.textoInvitado))]),s("div",{staticClass:"d-flex align-items-center justify-content-center"},[s("button",{staticClass:"btn btn-success",on:{click:function(e){return t.aceptarInvitacion()}}},[t._v("Aceptar")]),s("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.rechazarInvitacion()}}},[t._v("Rechazar")])])])])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col-md-7 mb-2 mb-md-0 p-0",attrs:{id:"mensajes"}},[a("div",{staticClass:"overflow-auto",attrs:{id:"mensajesChat"}},[a("ul",{attrs:{id:"listaMensajes"}},[a("li",[t._v("Bienvenido al chat general")])])]),a("div",{staticClass:"row m-0 botAnim",attrs:{id:"controlesChat"}},[a("input",{staticClass:"col-10",attrs:{type:"text",id:"textInput"}}),a("button",{staticClass:"col-2 center m-0 p-0",attrs:{id:"enviar"}},[t._v("Enviar")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"contenedorCarousel"},[a("div",{staticClass:"carouselTorneos"},[a("div",{staticClass:"torneoC",attrs:{id:"torneo1"}}),a("div",{staticClass:"torneoC",attrs:{id:"torneo2"}}),a("div",{staticClass:"torneoC",attrs:{id:"torneo3"}}),a("div",{staticClass:"torneoC",attrs:{id:"torneo4"}})])])}],c=(a("4160"),a("caad"),a("b64b"),a("2532"),a("159b"),a("1157")),l=a.n(c),d=a("8055"),u=a.n(d),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("md-list-item",[a("md-checkbox",{staticClass:"m-1",attrs:{disabled:"disabled"},model:{value:t.listo,callback:function(e){t.listo=e},expression:"listo"}}),a("md-avatar",{staticClass:"md-large"},[a("img",{attrs:{src:t.userImage,alt:t.nick}})]),a("div",{staticClass:"md-list-item-text"},[a("p",{staticClass:"text-center nombreUserLista"},[t._v(t._s(t.nick))])]),a("md-button",{staticClass:"md-icon-button md-list-action",on:{click:this.cambiarRoom}},[a("md-icon",[t._v("chat")])],1),a("md-button",{staticClass:"ml-2 md-icon-button md-list-action",on:{click:this.invitarJugador}},[a("md-icon",[t._v("videogame_asset")])],1),a("md-button",{staticClass:"ml-2 md-icon-button md-list-action",on:{click:function(e){return t.$router.push({path:"/perfil/"+t.nick})}}},[a("md-icon",[t._v("account_circle")])],1)],1)},p=[],v={name:"user-chat",props:["nick","ready","img"],mounted:function(){console.log(this.listo)},updated:function(){console.log("hace update")},data:function(){return{nombre:this.nick}},methods:{cambiarRoom:function(){console.log("llega a cambiar sala del componente"),this.$emit("cambiarSala",this.nombre)},invitarJugador:function(){console.log("llega a boton de componente"),this.$emit("invitar",this.nombre)}},computed:{userImage:function(){return"http://localhost:3000/usersIcon/"+this.img},listo:function(){return this.ready}}},f=v,h=(a("7321"),a("2877")),g=Object(h["a"])(f,m,p,!1,null,"c643d84c",null),C=g.exports,b=l.a,_={name:"pagina-principal",props:["conexion","user"],components:{userChat:C},mounted:function(){var t=this;console.log("se monta"),this.usr=this.user.nick,this.socket.emit("userConected",this.user),this.socket.on("user",(function(t){console.log(t)})),this.socket.on("reenvio",(function(e){console.log("llegan los mensajes"+e),console.log(e.userDest+"------"+t.roomActual),(e.dest==t.roomActual&&e.usr!=t.usr||e.usr==t.roomActual&&e.userDest==t.usr&&"general"!=e.dest)&&t.mostrarMensaje(e,!1),e.usr!=t.usr&&("general"!=e.dest?(t.chat[e.usr]||(t.chat[e.usr]=[]),t.chat[e.usr].push(e)):(t.chat["general"]||(t.chat["general"]=[]),t.chat["general"].push(e)))})),this.socket.on("listaUsuarios",(function(e){t.usuarios||(delete e[t.user.nick],t.usuarios=e),Object.keys(e).forEach((function(a){Object.keys(t.usuarios).includes(a)||a!=t.usr&&(t.usuarios[a]=e[a])})),t.$forceUpdate(),console.log(t.usuarios)})),this.socket.on("usuarioDesc",(function(e){e.forEach((function(e){delete t.usuarios[e]})),t.$forceUpdate()})),this.socket.on("menPriv",(function(t){console.log(t)})),this.socket.on("cambEstado",(function(e){if(e!=t.user.nick&&t.usuarios[e]){console.log("recibe cambiar");var a=!t.usuarios[e].ready;delete t.usuarios[e].ready,t.$set(t.usuarios[e],"ready",a),console.log(t.usuarios)}t.$forceUpdate()})),this.socket.on("invitacion",(function(e){t.invitado(e)})),this.socket.on("invitacionAceptada",(function(e){t.invitacionAceptada(e)})),b("#enviar").click((function(){t.enviarMensaje(t.socket)})),b("#textInput").keypress((function(e){"13"==e.keyCode&&t.enviarMensaje(t.socket)})),b(".carouselTorneos").slick({dots:!0,infinite:!1,speed:300,slidesToShow:3,slidesToScroll:3,adaptiveHeight:!0,responsive:[{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})},data:function(){return{chat:Object(),usr:"",ready:!1,roomActual:"general",usuarios:null,socket:this.conexion,jugadorInvitar:null,textoInvitar:null,textoInvitado:null}},updated:function(){console.log(this.conexion)},methods:{mostrarMensaje:function(t,e){var a=b("<li>"),s=b("<p>");b(s).text(t.usr+": "+t.msg),b(s).addClass("m-0 p-2"),b(a).append(s),e?b(a).addClass("mensaje-derecha"):b(a).addClass("mensaje-izquierda"),b("#listaMensajes").append(a)},cambiarEstado:function(){console.log("hace cambiar estado"),this.conexion.emit("checked",this.user.nick)},enviarMensaje:function(t){if(""!=b("#textInput").val()){var e=b("#textInput").val();b("#textInput").val("");var a="";a="general"==this.roomActual?"general":this.usuarios[this.roomActual].id;var s={usr:this.usr,id:this.socket.id,msg:e,dest:a,userDest:this.roomActual};t.emit("mensaje",s),this.chat[s.userDest]||(this.chat[s.userDest]=[]),this.chat[s.userDest].push(s),this.mostrarMensaje(s,!0)}},cambiarRoom:function(t){var e=this;console.log(t),"general"==t?b("#tituloChat").text("Chat General"):b("#tituloChat").text(t),b("#listaMensajes").empty(),this.roomActual=t,this.chat[t]&&this.chat[t].forEach((function(t){t.usr==e.usr?e.mostrarMensaje(t,!0):e.mostrarMensaje(t,!1)}))},prepInvitar:function(t){console.log("llega a metodo prep"),this.jugadorInvitar=t,this.textoInvitar="¿Quieres invitar a "+t+"?",b(".modal-invitar").modal("show")},invitar:function(){console.log(this.jugadorInvitar),console.log(this.usr),this.socket.emit("invitar",this.jugadorInvitar,this.usr),this.textoInvitar="Invitado, esperando respuesta",b("#botonInvitar").hide()},invitado:function(t){this.jugadorInvitar=t,this.textoInvitado=t+" quiere jugar contigo",b(".modal-invitado").modal("show")},aceptarInvitacion:function(){this.socket.emit("aceptarInvitacion",this.jugadorInvitar,this.usr),b(".modal-invitado").modal("hide"),console.log(this.jugadorInvitar);var t=this.$router.resolve({path:"/",query:{contrincante:this.jugadorInvitar,id:this.usr}});window.open(t.href,"_blank")},rechazarInvitacion:function(){this.socket.emit("rechazarInvitacion",this.jugadorInvitar,this.usr),b(".modal-invitado").modal("hide")},invitacionAceptada:function(t){b(".modal-invitar").modal("show"),this.jugadorInvitar=t,this.textoInvitado=t+" ha aceptado la partida!",b("#botonJugar").show()},jugar:function(){b(".modal-invitar").modal("hide"),console.log(this.jugadorInvitar);var t=this.$router.resolve({path:"/",query:{contrincante:this.jugadorInvitar,id:this.usr}});window.open(t.href,"_blank")}},computed:{userImage:function(){return"http://localhost:3000/usersIcon/"+this.user.img}}},y=_,x=(a("6f57"),Object(h["a"])(y,n,r,!1,null,"6d710ac8",null)),k=x.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("nav",{staticClass:"navbar navbar-expand-md navbar-dark"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("Logo")]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"collapsibleNavId"}},[a("ul",{staticClass:"navbar-nav mr-auto mt-2 mt-lg-0"},[a("li",{staticClass:"nav-item active"},[a("md-button",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Inicio "),a("span",{staticClass:"sr-only"},[t._v("(current)")])])],1),a("li",{staticClass:"nav-item active"},[a("md-button",{staticClass:"nav-link",attrs:{to:"/directos"}},[t._v("En Directo")])],1),a("li",{staticClass:"nav-item active"},[a("md-button",{staticClass:"nav-link",attrs:{to:"/torneos"}},[t._v("Torneos")])],1)]),this.logged?a("section",{staticClass:"sombraInsetComp",attrs:{id:"navuser"}},[a("div",{staticClass:"d-flex align-items-center m-2"},[a("img",{staticClass:"ml-2 mr-1 imgUser",attrs:{src:t.userImage}}),a("div",{staticClass:"d-flex flex-column justify-content-between"},[a("p",{staticClass:"m-0 texto-claro text-center",attrs:{id:"usernameNav"}},[t._v(t._s(this.nick))]),a("div",{attrs:{id:"botones"}},[a("md-button",{staticClass:"b-0 md-raised",on:{click:function(e){return t.$router.push({path:"/perfil/"+t.nick})}}},[t._v("Perfil")]),a("md-button",{staticClass:"b-0 md-raised",on:{click:this.logout}},[t._v("Logout")])],1)])])]):a("section",{staticClass:"d-flex"},[a("md-button",{staticClass:"md-raised b-0",attrs:{"data-toggle":"modal","data-target":".modal-login",id:"abrirLogin"}},[t._v("Login")]),a("md-button",{staticClass:"md-raised b-0",attrs:{"data-toggle":"modal","data-target":".modal-registro",id:"abrirRegistro"}},[t._v("Registrarse")])],1)])]),a("div",{staticClass:"modal fade modal-login",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content p-2"},[t._m(1),a("div",{staticClass:"modal-body"},[a("form",{attrs:{action:"",method:"post"},on:{submit:function(e){return e.preventDefault(),t.loguearse()}}},[t._m(2),t._m(3),t._m(4),a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Enviar")]),a("p",{attrs:{id:"errorLogin"}},[t._v(t._s(t.errorLogin))])])])])])])]),a("div",{staticClass:"modal fade modal-registro",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[t._m(5),a("div",{staticClass:"modal-body"},[a("form",{attrs:{action:"",method:"post"},on:{submit:function(e){return e.preventDefault(),t.registrarse()}}},[t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Enviar")]),a("p",{attrs:{id:"registerStatus"}},[t._v(t._s(t.registerStatus))])])])])])])])},I=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler d-lg-none",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapsibleNavId","aria-controls":"collapsibleNavId","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header mb-2"},[a("h1",{staticClass:"modal-title"},[t._v("Login")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"emailL"}},[t._v("Email")]),a("input",{staticClass:"form-control",attrs:{type:"email",id:"emailL","aria-describedby":"emailHelp",name:"email",placeholder:"Introduce tu email",required:""}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("No compartiremos tu Email con nadie.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"passwL"}},[t._v("Contraseña")]),a("input",{staticClass:"form-control",attrs:{type:"password",id:"passwL",name:"passw",placeholder:"Contraseña",required:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"terminosL",required:""}}),a("label",{staticClass:"form-check-label",attrs:{for:"terminosL"}},[t._v("Terminos y condiciones")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header mb-2"},[a("h1",{staticClass:"modal-title"},[t._v("Registro")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t._v("x")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"nick"}},[t._v("Nick")]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"nick",name:"text",placeholder:"Introduce tu Nick",required:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"nombre"}},[t._v("Nombre")]),a("input",{staticClass:"form-control",attrs:{type:"text",id:"nombre",name:"text",placeholder:"Introduce tu nombre",required:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("input",{staticClass:"form-control",attrs:{type:"email",id:"email","aria-describedby":"emailHelp",name:"email",placeholder:"Introduce tu email",required:""}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("No compartiremos tu Email con nadie.")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"passw"}},[t._v("Contraseña")]),a("input",{staticClass:"form-control",attrs:{type:"password",id:"passw",name:"passw",placeholder:"Contraseña",required:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"terminos",required:""}}),a("label",{staticClass:"form-check-label",attrs:{for:"terminos"}},[t._v("Terminos y condiciones")])])}],w=l.a,E={name:"nav1",props:["conexion","nick","logged","img"],mounted:function(){var t=this;this.conexion.on("errorLogin",(function(e){t.errorLogin=e,setTimeout((function(){t.errorLogin=""}),2e3)})),this.conexion.on("resultadoRegistro",(function(e){if(e.error)t.registerStatus=e.error,console.log(t.registerStatus),console.log(e.error);else{t.registerStatus=e.registrado;w("#nick")[0].value="",w("#nombre")[0].value="",w("#email")[0].value="",w("#passw")[0].value="";setTimeout((function(){w(".modal-registro").modal("hide"),t.registerStatus=" "}),2e3)}}))},data:function(){return{registerStatus:"",errorLogin:"",userImg:this.img}},methods:{loguearse:function(){var t=w("#emailL")[0].value,e=w("#passwL")[0].value;this.conexion.emit("login",{email:t,password:e})},registrarse:function(){var t=w("#nick")[0].value,e=w("#nombre")[0].value,a=w("#email")[0].value,s=w("#passw")[0].value;this.conexion.emit("register",{nick:t,nombre:e,email:a,password:s})},logout:function(){this.$emit("logout")}},computed:{userImage:function(){return"http://localhost:3000/usersIcon/"+this.img}}},S=E,$=(a("b248"),Object(h["a"])(S,j,I,!1,null,"da7addc8",null)),T=$.exports,M=l.a,D={name:"App",components:{paginaPrincipal:k,nav1:T},mounted:function(){var t=this;this.$route.query.contrincante&&this.$router.push({path:"/game",query:this.$route.query}),this.socket.on("respLogin",(function(e){console.log(e),e&&(sessionStorage.id=e.idSession,t.user=e,t.logged=!0,M(".modal-login").modal("hide"))})),sessionStorage.id&&this.socket.emit("comprobarSesion",sessionStorage.id),this.logged||(this.mensajeError="Tienes que estar loggeado")},updated:function(){},data:function(){return{logged:!1,socket:u()(),mensajeError:"",user:{nick:"Ejemplo Nick"}}},methods:{logueado:function(t){this.logged=t.logged,this.user=t.user},logout:function(){this.socket.emit("logout",sessionStorage.id),this.logged=!1,sessionStorage.removeItem("id")}},computed:{fueraJuego:function(){return"/game"!=this.$route.path}}},P=D,L=(a("034f"),Object(h["a"])(P,i,o,!1,null,null,null)),O=L.exports,U=a("43f9"),z=a.n(U),q=(a("51de"),a("d69d"),a("4989"),a("65e8"),a("b725"),a("2bb9"),a("ab8b"),a("8c4f")),R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("md-app",[a("md-app-content",[a("div",{staticClass:"md-layout d-flex flex-column flex-nowrap justify-content-between",attrs:{id:"aplicacion"}},[a("div",{staticClass:"md-layout-item md-size-100 h-15"},[a("div",{staticClass:"md-layout h-100"},[a("div",{staticClass:"md-layout-item md-size-40 md-layout",class:{sombreado:t.turno}},[a("div",{staticClass:"md-layout md-layout-item md-size-30 d-flex flex-column justify-content-around centrado flex-nowrap"},[a("span",[a("b",[t._v("Media: "+t._s(t.partida.local.media))])])]),a("div",{staticClass:"md-layout-item md-size-70 d-flex flex-column align-items-center justify-content-around"},[a("span",{staticClass:"md-size-100 centrado"},[t._v(t._s(t.usuario))]),a("span",{staticClass:"md-display-3 puntuacion",attrs:{id:"marcador"}},[t._v(t._s(t.partida.local.puntos))])])]),a("div",{staticClass:"md-layout-item md-size-20 md-layout"},[a("span",{staticClass:"md-layout-item md-size-100 md-display-1 centrado"},[t._v(t._s(t.marcador.local)+" - "+t._s(t.marcador.visitante))]),a("div",{staticClass:"md-layout-item md-size-100 md-layout"},[a("div",{staticClass:"md-layout-item md-size-60 md-small-size-100 divInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],attrs:{type:"text",disabled:t.turno,id:"inputPuntos",placeholder:"Introduce tu puntuación",autofocus:""},domProps:{value:t.input},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enter(e)},input:function(e){e.target.composing||(t.input=e.target.value)}}})]),a("div",{staticClass:"md-layout-item md-size-40 md-small-size-100 divInput"},[a("md-button",{staticClass:"md-raised md-primary",attrs:{disabled:t.validar,id:"botonPuntos"},on:{click:t.enviarPuntuacion}},[t._v("Enviar")])],1)])]),a("div",{staticClass:"md-layout-item md-size-40 md-layout",class:{sombreado:!t.turno}},[a("div",{staticClass:"md-layout md-layout-item md-size-70 d-flex flex-column align-items-center justify-content-around"},[a("span",{staticClass:"md-size-100 centrado"},[t._v(t._s(t.contrincante))]),a("span",{staticClass:"md-display-3 puntuacion",attrs:{id:"marcador"}},[t._v(t._s(t.partida.visitante.puntos))])]),a("div",{staticClass:"md-layout md-layout-item md-size-30 d-flex flex-column justify-content-around centrado flex-nowrap"},[a("span",{staticClass:"centrado"},[a("b",[t._v("Media: "+t._s(t.partida.visitante.media))])])])])])]),a("div",{staticClass:"md-layout-item md-size-100 flex-fill h-85 md-elevation-5",attrs:{id:"divCamaras"}},[a("video",{attrs:{id:"remote",autoplay:""}}),a("video",{staticClass:"md-elevation-5",attrs:{id:"local",autoplay:"",muted:""},domProps:{muted:!0}})])])])],1)},A=[],J=(a("ac1f"),a("466d"),a("d093"),{name:"Game",props:["conexion","user"],mounted:function(){var t=this;this.usuario=this.$route.query.id||"Jugador 1",console.log(navigator.mediaDevices.enumerateDevices()),this.socket.emit("paginaJuego",this.$route.query.id),this.contrincante=this.$route.query.contrincante||"Jugador 2",console.log(this.usuario,this.contrincante);var e=document.getElementById("local");this.socket.on("preparado",(function(){console.log("preparado recibido"),t.pc=new RTCPeerConnection(t.pcConf),t.pc.addStream(e.srcObject),t.pc.createOffer().then((function(e){return t.pc.setLocalDescription(e)})).then((function(){console.log("offer"),t.socket.emit("offer",t.pc.localDescription,t.contrincante)})),t.pc.ontrack=function(t){document.getElementById("remote").srcObject=t.streams[0]},t.id="local"})),this.socket.on("offer",(function(a){t.pc=new RTCPeerConnection(t.pcConf),t.pc.addStream(e.srcObject),t.pc.setRemoteDescription(a).then((function(){return t.pc.createAnswer()})).then((function(e){return t.pc.setLocalDescription(e)})).then((function(){t.socket.emit("answer",t.pc.localDescription,t.contrincante)})),t.pc.ontrack=function(t){document.getElementById("remote").srcObject=t.streams[0]},t.pc.onicecandidate=function(e){e.candidate&&t.socket.emit("candidate",e.candidate,t.contrincante)},t.id="visitante"})),this.socket.on("candidate",(function(e){t.pc.addIceCandidate(new RTCIceCandidate(e)).catch((function(t){return console.error(t)}))})),this.socket.on("answer",(function(e){t.pc.setRemoteDescription(e),t.socket.emit("comenzarPartida",t.usuario,t.contrincante)})),this.socket.on("comenzarPartida",(function(e){console.log("comenzar partida",t.usuario,t.contrincante),t.partida=e,t.partida.turno==t.id&&document.getElementById("puntuacion").focus()})),this.socket.on("ganador",(function(e){t.marcador[e]++})),this.socket.on("tirada",(function(e){t.partida=e,t.partida.turno==t.id&&document.getElementById("puntuacion").focus()})),this.getUserMediaDevices()},data:function(){return{socket:this.conexion,usuario:"Jugador 1",pc:null,contrincante:"Jugador 2",partida:{local:{puntos:501,nDardos:0,media:0},visitante:{puntos:501,nDardos:0,media:0},turno:null},marcador:{local:0,visitante:0},input:null,id:null,constraints:{audio:!0,video:!0},pcConf:{iceServers:[{urls:"turn:168.63.17.113:3478",username:"davidmpuyol",credential:"davidmpuyol"}]},gettingUserMedia:!1}},methods:{enviarPuntuacion:function(){var t={puntos:parseInt(this.input),dardos:3,idPartida:this.partida.idPartida};console.log(t),this.socket.emit("tirada",t),this.input=null},getUserMediaDevices:function(){var t=document.getElementById("local");t instanceof HTMLVideoElement&&(t.srcObject?(this.getUserMediaSuccess(t.srcObject),this.gettingUserMedia=!1):this.gettingUserMedia||t.srcObject||(this.gettingUserMedia=!0,navigator.mediaDevices.getUserMedia(this.constraints).then(this.getUserMediaSuccess).catch(this.getUserMediaError)))},getUserMediaSuccess:function(t){var e=document.getElementById("local");this.gettingUserMedia=!1,e instanceof HTMLVideoElement&&!e.srcObject&&(e.srcObject=t),this.socket.emit("preparado",this.contrincante)},getUserMediaError:function(t){console.error(t),this.gettingUserMedia=!1},enter:function(){this.validar||this.enviarPuntuacion()}},computed:{validar:function(){if(!this.input)return!0;if(!this.input.match(/^[0-9]*$/))return!0;var t=parseInt(this.input);return t<0||t>180||t>this.partida[this.partida.turno].puntos},turno:function(){return!this.partida.turno||this.id!=this.partida.turno},textoTurno:function(){return this.partida.turno?this.id==this.partida.turno?"Es tu turno, introduce tu puntuación":"Espera a que el oponente tire":"cargando"}}}),N=J,H=(a("683d"),Object(h["a"])(N,R,A,!1,null,"c3fa389c",null)),B=H.exports,V=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},G=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"torneos"},[a("h1",[t._v("torneos Component")])])}],Q={name:"torneos",props:[],mounted:function(){},data:function(){return{}},methods:{},computed:{}},F=Q,K=(a("b8c8"),Object(h["a"])(F,V,G,!1,null,"3279e280",null)),W=K.exports,X=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("main",{staticClass:"container-fluid"},[a("h2",{staticClass:"text-center mt-3 tituloDirecto"},[t._v("Destacados")]),a("section",{staticClass:"contenedorCarousel"},[a("div",{staticClass:"carouselDirectos"},[a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"})])]),a("h2",{staticClass:"text-center mt-3 tituloDirecto"},[t._v("Torneos")]),a("section",{staticClass:"contenedorCarousel"},[a("div",{staticClass:"carouselDirTorneos"},[a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"})])]),a("div",{staticClass:"w-100 d-flex justify-content-center botAnim",attrs:{id:"botonMasTorneos"}},[a("button",{staticClass:"center"},[t._v("Ver más")])]),a("h2",{staticClass:"text-center mt-3 tituloDirecto"},[t._v("Partida Rapida")]),a("section",{staticClass:"contenedorCarousel"},[a("div",{staticClass:"carouselDirPartRapida"},[a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"}),a("div",{staticClass:"torneoC"})])]),a("div",{staticClass:"w-100 d-flex justify-content-center botAnim",attrs:{id:"botonMasPartRapidas"}},[a("button",{staticClass:"center"},[t._v("Ver más")])])])])}],Z=l.a,tt={name:"directos",props:[],mounted:function(){Z(".carouselDirectos").slick({centerMode:!0,arrows:!0,centerPadding:"60px",slidesToShow:3,responsive:[{breakpoint:768,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:1}},{breakpoint:480,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:1}}]}),Z(".carouselDirTorneos").slick({dots:!0,infinite:!1,speed:300,slidesToShow:3,slidesToScroll:3,adaptiveHeight:!0,responsive:[{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}),Z(".carouselDirPartRapida").slick({dots:!0,infinite:!1,speed:300,slidesToShow:3,slidesToScroll:3,adaptiveHeight:!0,responsive:[{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})},data:function(){return{}},methods:{},computed:{}},et=tt,at=(a("2a7d"),Object(h["a"])(et,X,Y,!1,null,"36fb52f2",null)),st=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"perfil"},[this.cargado?a("div",{staticClass:"row m-0"},[a("section",{staticClass:"col-12 col-sm-4 sombraInset d-flex align-items-center flex-column p-0",attrs:{id:"datosUser"}},[a("div",{staticClass:"borde-animado-perfil sombra mb-2",attrs:{id:"fotoUser"}},[a("img",{staticClass:"imgPerfil",attrs:{src:this.userImage}})]),a("h3",{staticClass:"w-100 text-center"},[t._v(t._s(t.nick))]),a("div",{staticClass:"d-flex flex-column w-75",attrs:{id:"statsResumidas"}},[a("div",{staticClass:"d-flex align-items-center justify-content-around",attrs:{id:"victoriasStats"}},[a("img",{staticClass:"iconosPerfil",attrs:{src:"http://localhost:3000/imgApp/victorias.png",title:"Victorias"}}),a("p",{staticClass:"parrafosStats m-0"},[t._v(t._s(t.datosUsuario.nVictorias))])]),a("div",{staticClass:"d-flex align-items-center justify-content-around",attrs:{id:"derrotasStats"}},[a("img",{staticClass:"iconosPerfil",attrs:{src:"http://localhost:3000/imgApp/derrotas.png",title:"Derrotas"}}),a("p",{staticClass:"parrafosStats m-0"},[t._v(t._s(t.datosUsuario.nDerrotas))])])])]),a("section",{staticClass:"col-12 col-sm-8 overflow-auto sombraInsetComp p-3",attrs:{id:"graficosEstadisticas"}},[a("h2",{staticClass:"text-center"},[t._v("Total partidas jugadas")]),a("p",{staticClass:"parrafosStats text-center"},[t._v(t._s(t.datosUsuario.nPartidas))]),a("h2",{staticClass:"text-center"},[t._v("Ultimas partidas")])])]):a("div",[a("p",{staticClass:"text-center"},[t._v("No se encontro el perfil >:( ")])])])},ot=[],nt={name:"perfil",props:["nick","conexion"],mounted:function(){var t=this;this.conexion.on("respDatosPerfil",(function(e){t.datosUsuario=e,console.log(t.datosUsuario),e.error?t.cargado=!1:t.cargado=!0})),console.log(this.nick),this.conexion.emit("solicitarDatosPerfil",this.nick)},data:function(){return{cargado:!1,datosUsuario:{img:"null"}}},methods:{},computed:{userImage:function(){return"http://localhost:3000/usersIcon/"+this.datosUsuario.img}}},rt=nt,ct=(a("9526"),Object(h["a"])(rt,it,ot,!1,null,"51d7909e",null)),lt=ct.exports;window.$=l.a;var dt=a("1157");window.$=dt,s["default"].config.productionTip=!1,s["default"].use(q["a"]),s["default"].use(z.a);var ut=[{path:"/",component:k},{path:"/game",component:B,props:!0},{path:"/torneos",component:W},{path:"/directos",component:st},{path:"/perfil/:nick",component:lt,props:!0}],mt=new q["a"]({mode:"history",routes:ut});new s["default"]({router:mt,render:function(t){return t(O)}}).$mount("#app")},"5f7e":function(t,e,a){t.exports=a.p+"img/p5.b63e4a9b.jpg"},"683d":function(t,e,a){"use strict";var s=a("b2ea"),i=a.n(s);i.a},"6f57":function(t,e,a){"use strict";var s=a("d50e"),i=a.n(s);i.a},7321:function(t,e,a){"use strict";var s=a("02bf"),i=a.n(s);i.a},"85ec":function(t,e,a){},"8d02":function(t,e,a){},9526:function(t,e,a){"use strict";var s=a("e5d4"),i=a.n(s);i.a},b248:function(t,e,a){"use strict";var s=a("8d02"),i=a.n(s);i.a},b2ea:function(t,e,a){},b8c8:function(t,e,a){"use strict";var s=a("f0ac"),i=a.n(s);i.a},d50e:function(t,e,a){},e5d4:function(t,e,a){},f0ac:function(t,e,a){},fe52:function(t,e,a){}});
//# sourceMappingURL=app.95909926.js.map